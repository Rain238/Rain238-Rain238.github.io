<!-- build time:Tue Jun 17 2025 18:01:35 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="baidu-site-verification" content="http://data.zz.baidu.com/urls?site=r.rainrem.top&token=x4FJjhRFfBhkMWK1"><link rel="alternate" type="application/rss+xml" title="雨的记忆" href="https://rainrem.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="雨的记忆" href="https://rainrem.top/atom.xml"><link rel="alternate" type="application/json" title="雨的记忆" href="https://rainrem.top/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="计算机科学,C++,C++核心编程"><link rel="canonical" href="https://rainrem.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/c++/c++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/"><title>C++核心编程 - C++核心编程 - C++ - 计算机科学 | Daring Traveler = 雨的记忆 = 程序是有生命的精灵</title><meta name="generator" content="Hexo 6.0.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">C++核心编程</h1><div class="meta"><span class="item" title="创建时间：2025-06-15 22:13:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2025-06-15T22:13:00+08:00">2025-06-15</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>41k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>37 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Daring Traveler</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://www.dmoe.cc/random.php?756251"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?21952"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?399297"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?462655"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?205607"></li><li class="item" data-background-image="https://www.dmoe.cc/random.php?672259"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" itemprop="item" rel="index" title="分类于 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/C/" itemprop="item" rel="index" title="分类于 C++"><span itemprop="name">C++</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/C/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/" itemprop="item" rel="index" title="分类于 C++核心编程"><span itemprop="name">C++核心编程</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://rainrem.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/c++/c++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/02.jpg"><meta itemprop="name" content="Light Rain"><meta itemprop="description" content="程序是有生命的精灵, 我还在原地等你，你却已经忘记曾来过这里"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="雨的记忆"></span><div class="body md" itemprop="articleBody"><details class="danger"><summary>内存四大分区概念简介</summary><div><ul><li>在 C++ 程序执行时，将内存大方向划分为四个区域<ul><li>代码区：存放函数体的二进制代码，由操作系统进行管理的</li><li>全局区：存放全局变量和静态变量以及常量</li><li>栈区：由编译器自动分配释放，存在函数的参数值，局部变量等</li><li>堆区：由程序员分配和释放，若程序员不释放，程序结束时由操作系统回收</li><li>内存四区意义：不同区域存放的数据，赋予不同的生命周期，给我们更大的灵活编程</li></ul></li></ul></div></details><h1 id="new操作符-内存分区模型"><a class="anchor" href="#new操作符-内存分区模型">#</a> new 操作符 - 内存分区模型</h1><blockquote><p><code>C++</code> 中利用 <code>new</code> 操作符在堆区开辟数据，堆区开辟的数据，由程序员手动开辟，手动释放，释放利用操作符 <code>delete</code><br>, 语法： <code>new 数据类型</code> ，利用 <code>new</code> 创建的数据，会返回该数据对应的类型指针</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>new操作符</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 使用 new 关键字开辟空间可以返回指针地址</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>p <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>p <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 利用 delete 释放堆区数据</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">delete</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">//    cout &lt;&lt; *p &lt;&lt; endl;// 释放后的空间不可访问</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 在堆中开辟应该数组</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 手动开辟内存</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">;</span><span class="token comment">// 手动释放内存</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="引用"><a class="anchor" href="#引用">#</a> 引用</h1><h2 id="引用的基本使用"><a class="anchor" href="#引用的基本使用">#</a> 引用的基本使用</h2><blockquote><p>作用：给变量起别名，语法： <code>数据类型 &amp;别名 = 原名</code></p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>引用的基本使用</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 引用的基本使用</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：给变量起别名</pre></td></tr><tr><td data-num="4"></td><td><pre> * 语法：数据类型 &amp; 别名 = 原名</pre></td></tr><tr><td data-num="5"></td><td><pre>*/</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 给变量起别名，创建引用</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">&amp;</span>b <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a："</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b："</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a："</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b："</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="引用注意事项"><a class="anchor" href="#引用注意事项">#</a> 引用注意事项</h2><blockquote><p>引用必须初始化，引用在初始化后，不可以改变</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>引用注意事项</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 引用注意事项</pre></td></tr><tr><td data-num="3"></td><td><pre> * 引用必须初始化</pre></td></tr><tr><td data-num="4"></td><td><pre> * 引用在初始化后不可以改变</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">// 创建变量</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">//    int &amp;c;// 引用必须初始化</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">&amp;</span>c <span class="token operator">=</span> a<span class="token punctuation">;</span><span class="token comment">// 引用一旦初始化就不可以更改</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    c <span class="token operator">=</span> b<span class="token punctuation">;</span><span class="token comment">// 这是赋值操作不是更改引用</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a："</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b："</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"c："</span> <span class="token operator">&lt;&lt;</span> c <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="引用做函数参数"><a class="anchor" href="#引用做函数参数">#</a> 引用做函数参数</h2><blockquote><p>作用：函数传参时，可以利用引用的技术让形参修饰实参</p></blockquote><blockquote><p>优点：可以简化指针修改实参</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>引用做函数参数</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 引用做函数参数</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：函数传参时，可以利用引用的技术让形参修饰实参</pre></td></tr><tr><td data-num="4"></td><td><pre> * 优点：可以简化指针修改实参</pre></td></tr><tr><td data-num="5"></td><td><pre> * 总结：通过引用参数产生的效果同按地址传递是一样的。引用的语法更清楚简单</pre></td></tr><tr><td data-num="6"></td><td><pre>*/</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">//1. 值传递</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">void</span> <span class="token function">mySwap01</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">int</span> temp <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    a <span class="token operator">=</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    b <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">//    cout &lt;&lt; "mySwap01 a= " &lt;&lt; a &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//    cout &lt;&lt; "mySwap01 b= " &lt;&lt; b &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">//2. 地址传递</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">void</span> <span class="token function">mySwap02</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">*</span>b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">int</span> temp <span class="token operator">=</span> <span class="token operator">*</span>a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token operator">*</span>a <span class="token operator">=</span> <span class="token operator">*</span>b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token operator">*</span>b <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">//3. 地址传递</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">void</span> <span class="token function">mySwap03</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">int</span> temp <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    a <span class="token operator">=</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    b <span class="token operator">=</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token comment">// 值传递，形参不会修饰实参</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token function">mySwap01</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a= "</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b= "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token comment">// 地址传递，形参可以修饰实参</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token function">mySwap02</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a= "</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b= "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token comment">// 引用传递。形参也会修饰实参</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token function">mySwap03</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a= "</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"b= "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="引用做函数返回值"><a class="anchor" href="#引用做函数返回值">#</a> 引用做函数返回值</h2><blockquote><p>作用：引用是可以作为函数的返回值存在的</p></blockquote><blockquote><p>注意：不要返回局部变量引用</p></blockquote><blockquote><p>用法：函数调用作为左值</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>引用做函数返回值</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 引用做函数的返回值</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：引用是可以作为函数的返回值存在的</pre></td></tr><tr><td data-num="4"></td><td><pre> * 注意：不要返回局部变量的引用</pre></td></tr><tr><td data-num="5"></td><td><pre> * 用法：函数调用作为左值</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 返回局部变量引用</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">int</span> <span class="token operator">&amp;</span><span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 局部变量存在四区中的：栈区</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 该方法调用完成后变量会被自动销毁</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">// 局部变量</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 返回静态变量引用</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">int</span> <span class="token operator">&amp;</span><span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 静态变量，存放在全局区，全局区上的数据在程序结束后系统释放</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment">// 静态变量</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">return</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 引用做函数的返回值</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token comment">// 不要返回局部变量的引用</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">//    int &amp;ref = test01();</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">//    cout &lt;&lt; "ref =" &lt;&lt; ref &lt;&lt; endl;// 因为内存已经被释放</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">&amp;</span>ref2 <span class="token operator">=</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ref2 = "</span> <span class="token operator">&lt;&lt;</span> ref2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ref2 = "</span> <span class="token operator">&lt;&lt;</span> ref2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 左值赋值操作</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ref2 = "</span> <span class="token operator">&lt;&lt;</span> ref2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ref2 = "</span> <span class="token operator">&lt;&lt;</span> ref2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="引用的本质"><a class="anchor" href="#引用的本质">#</a> 引用的本质</h2><blockquote><p>本质：引用的本质在 <code>C++</code> 内部实现是应该指针常量</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>引用的本质</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 引用的本质</pre></td></tr><tr><td data-num="3"></td><td><pre> * 本质：引用的本质在 C++ 内部实现是一个指针常量</pre></td></tr><tr><td data-num="4"></td><td><pre> * 引用的本质就是一个指针常量</pre></td></tr><tr><td data-num="5"></td><td><pre> * 引用一旦初始化后，就不可以发生改变</pre></td></tr><tr><td data-num="6"></td><td><pre> * 总结：C++ 推荐用引用技术，因为语法方便，引用本质是指针常量，但是所有的指针操作编译器都帮我们做了</pre></td></tr><tr><td data-num="7"></td><td><pre>*/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 发现是引用，转换为 int * const ref = &amp;a;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>ref<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    ref <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token comment">//ref 是引用，转换为 *ref = 100</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 自动转换为 intconstref=&amp;a; 指针常量是指针指向不可改，也说明为什么引用不可更改</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">&amp;</span>ref <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    ref <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span><span class="token comment">// 内部发现 ref 是引用，自动帮我们转换为: *ref = 20;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a: "</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ref: "</span> <span class="token operator">&lt;&lt;</span> ref <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">func</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="常量引用"><a class="anchor" href="#常量引用">#</a> 常量引用</h2><blockquote><p>作用：常量引用主要用来修饰形参，防止误操作</p></blockquote><blockquote><p>在函数形参列表中，可以加 const 修饰形参，防止形参改变实参</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>常量引用</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 常量引用</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：常量引用主要用来修饰形参，防止误操作</pre></td></tr><tr><td data-num="4"></td><td><pre> * 在函数形参列表中，可以添加 const 修饰形参，防止形参改变实参</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 打印数据函数</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">void</span> <span class="token function">showValue</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>val<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">//    v += 10;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">//    v = 1000;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> val <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">//int &amp; ref = 10; 引用本身需要一个合法的内存空间，因此这行错误</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 加入 const 就可以了，编译器优化代码，int temp = 10; const int&amp; ref = temp;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token comment">//    int a  = 10;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">//    int &amp;ref = 10;  // 错误</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 加上 const 之后编译器将代码修改 int temp = 10; const int &amp; ref = temp;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>ref <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">// 引用必须引一块合法的内存空间</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">//    ref = 20; // 加入 const 之后变为只读，不可以修改</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token function">showValue</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="函数提高"><a class="anchor" href="#函数提高">#</a> 函数提高</h1><h2 id="函数的默认参数"><a class="anchor" href="#函数的默认参数">#</a> 函数的默认参数</h2><blockquote><p>在 <code>C++</code> 中，函数的形参列表中的形参是可以有默认值的，语法： <code>返回值类型 函数名(参数=默认值)&#123; &#125;</code></p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>函数默认参数</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 函数默认参数</pre></td></tr><tr><td data-num="3"></td><td><pre> * 在 C++ 中 函数的形参列表中的形参是可以有默认值的</pre></td></tr><tr><td data-num="4"></td><td><pre> * 语法：返回值类型 函数名称 (参数 = 默认值)</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 函数默认参数</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 如果我们自己传入数据，就用自己的数据，如果没有，那么用默认值</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">//1，如果某个位置参数有默认值，那么从这个位置往后，从左向右，必须都要有默认值</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//2，如果函数声明有默认值，函数实现的时候就不能有默认参数</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">//3、如果函数声明有默认参数，函数实现就不能有默认参数，声明和实现只能有一个有默认参数</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">int</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">int</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">// 注意事项</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">//1、如果某个位置已经有了默认参数，那么从这个位置往后，从左到右都必须有默认值</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">//int func3(int a = 10, int b, int c) &#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">//    return a + b + c;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">//&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="函数的占位参数"><a class="anchor" href="#函数的占位参数">#</a> 函数的占位参数</h2><blockquote><p><code>C++</code> 中函数的形参列表里可以有占位参数，用来做占位使用，被调用函数时必须填补该位置</p></blockquote><blockquote><p>语法： <code>返回值类型 函数名 (数据类型)&#123; &#125;</code></p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>函数占位参数</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 函数占位参数</pre></td></tr><tr><td data-num="3"></td><td><pre> * C++ 中函数的形参列表里可以有占位参数，，用来做占位操作，调用函数时必须填补该位置</pre></td></tr><tr><td data-num="4"></td><td><pre> * 语法：返回值 函数名称 (数据类型)&#123; &#125;</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 函数占位参数占位参数也可以有默认参数</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"this is func"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 占位参数还可以有默认参数</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">void</span> <span class="token function">func1</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"this is func"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 占位参数必须填补</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token function">func1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="函数重载"><a class="anchor" href="#函数重载">#</a> 函数重载</h2><ul><li>作用：函数名可以相同，提高复用性</li><li>函数重载需要满足以下条件：<ul><li>同一个作用域下</li><li>函数名称相同</li><li>函数参数类型不同或者个数不同或者顺序不同</li></ul></li><li>注意：函数的返回值不可以作为函数重载的条件</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>函数重载</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 函数重载 - 函数重载概述</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：函数名可以相同，提高复用性</pre></td></tr><tr><td data-num="4"></td><td><pre> * 函数重载满足条件：</pre></td></tr><tr><td data-num="5"></td><td><pre> * 同一个作用域下</pre></td></tr><tr><td data-num="6"></td><td><pre> * 函数名称相同</pre></td></tr><tr><td data-num="7"></td><td><pre> * 函数参数类型不同或者个数不同或者顺序不同</pre></td></tr><tr><td data-num="8"></td><td><pre> *</pre></td></tr><tr><td data-num="9"></td><td><pre> * 注意：函数的返回值不可以作为函数重载的条件</pre></td></tr><tr><td data-num="10"></td><td><pre> */</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 函数重载需要函数都在同一个作用域下</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"func"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"func："</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"func："</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">func</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="函数重载注意事项"><a class="anchor" href="#函数重载注意事项">#</a> 函数重载注意事项</h2><ul><li>引用作为重载条件</li><li>函数重下碰到函数默认参数</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>函数重载注意事项</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 函数重载注意事项</pre></td></tr><tr><td data-num="3"></td><td><pre> */</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 1. 引用作为重载条件</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    cout<span class="token operator">&lt;&lt;</span> <span class="token string">"func (int &amp;a) 调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    cout<span class="token operator">&lt;&lt;</span> <span class="token string">"func (const int &amp;a) 调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 2. 函数重载碰到函数默认参数</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"func2 (int &amp;a) 调用"</span> <span class="token operator">&lt;&lt;</span>  endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"func2 (int &amp;a) 调用"</span> <span class="token operator">&lt;&lt;</span>  endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">//    int a = 10;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">//    func(a);</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">//    func(10);</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">//    func2 (10);// 当函数重载碰到默认参数，会出现二义性，报错，尽量避免这种情况</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h1 id="类和对象"><a class="anchor" href="#类和对象">#</a> 类和对象</h1><blockquote><p><code>C++</code> 面向对象的三大特性为：封装、继承、多态， <code>C++</code> 认为万事万物都皆为对象，对象上有其属性和行为</p></blockquote><h2 id="封装"><a class="anchor" href="#封装">#</a> 封装</h2><ul><li>封装是 <code>C++</code> 面向对象三大特性之一</li><li>封装的意义：<ul><li>将属性和行为作为一个整体</li><li>将属性和行为加以权限控制</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>封装的意义</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 封装的意义</pre></td></tr><tr><td data-num="3"></td><td><pre> *</pre></td></tr><tr><td data-num="4"></td><td><pre> */</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 设计一个圆类，求圆的周长</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 圆求周长的公式：2 * PI * 半径</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">//c1ass 代表设计一个类，类后面紧跟着的就是类名称</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 圆周率</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">const</span> <span class="token keyword">double</span> PI <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Circle</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 访问权限</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span> <span class="token comment">// 公共权限</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 半径</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">int</span> m_r<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">double</span> <span class="token function">calculateZC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> PI <span class="token operator">*</span> m_r<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span> <span class="token comment">// 私有权限</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 属性</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">// 行为</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span> <span class="token comment">// 继承权限</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 通过圆类创建具体的圆 (对象)</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">// 实例化 (通过一个类创建一个对象的过程)</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    Circle circle<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token comment">// 给园的属性进行赋值</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    circle<span class="token punctuation">.</span>m_r <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token comment">//    circle.calculateZC();</span></pre></td></tr><tr><td data-num="41"></td><td><pre>   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"圆的周长为："</span> <span class="token operator">&lt;&lt;</span> circle<span class="token punctuation">.</span><span class="token function">calculateZC</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="设计学生类"><a class="anchor" href="#设计学生类">#</a> 设计学生类</h2><blockquote><p>案例：设计一个学生类，属性有姓名和学号，可以给姓名和学号进行赋值，可以显示学生和姓名以及学号</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>设计学生类</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 设计学生类</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span> id<span class="token punctuation">;</span><span class="token comment">// 学号</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    string name<span class="token punctuation">;</span><span class="token comment">// 姓名</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">return</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        Student<span class="token double-colon punctuation">::</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">const</span> string <span class="token operator">&amp;</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">return</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>name<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        Student<span class="token double-colon punctuation">::</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">// 实例化</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    Student student<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    student<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    student<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"李四"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ID："</span> <span class="token operator">&lt;&lt;</span> student<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" name："</span> <span class="token operator">&lt;&lt;</span> student<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    Student student2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    student2<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    student2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ID："</span> <span class="token operator">&lt;&lt;</span> student2<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" name："</span> <span class="token operator">&lt;&lt;</span> student2<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="struct和class区别"><a class="anchor" href="#struct和class区别">#</a> struct 和 class 区别</h2><ul><li>在 <code>C++</code> 中 <code>struct</code> 和 <code>class</code> 的唯一区别就是在于默认的访问权限不同</li><li>区别：<ul><li><code>struct</code> : 默认权限为公共</li><li><code>class</code> : 默认权限为私有</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>struct和class区别</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* struct 和 class 区别</pre></td></tr><tr><td data-num="3"></td><td><pre>* 在 C++ 中 struct 和 class 唯一的区别就在于默认的访问权限不同</pre></td></tr><tr><td data-num="4"></td><td><pre>* 区别：</pre></td></tr><tr><td data-num="5"></td><td><pre> * struct 默认权限为公共</pre></td></tr><tr><td data-num="6"></td><td><pre> * class 默认权限为私有</pre></td></tr><tr><td data-num="7"></td><td><pre>*/</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">C1</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 默认是私有权限</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">C2</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 默认是公共权限</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="立方体案例"><a class="anchor" href="#立方体案例">#</a> 立方体案例</h2><blockquote><p>设计一个立方体 <code>(Cube)</code> , 要求：求出立方体的面积和体积，并且分别用全局函数和成员函数判断两个立方体是否相等。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>立方体案例</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Cube</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 行为</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">//1. 设置获取长宽高</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 设置长</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setML</span><span class="token punctuation">(</span><span class="token keyword">int</span> ml<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>m_L <span class="token operator">=</span> ml<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 设置宽</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMW</span><span class="token punctuation">(</span><span class="token keyword">int</span> mw<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>m_W <span class="token operator">=</span> mw<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 设置髙</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMH</span><span class="token punctuation">(</span><span class="token keyword">int</span> mh<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>m_H <span class="token operator">=</span> mh<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 获取长</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token keyword">return</span> m_L<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 获取宽</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getMW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">return</span> m_W<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 获取髙</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getMH</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token keyword">return</span> m_H<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token comment">// 获取立方体面积</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> m_L <span class="token operator">*</span> m_W <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> m_W <span class="token operator">*</span> m_H <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> m_L <span class="token operator">*</span> m_H<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token comment">// 获取立方体体积</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>        <span class="token keyword">return</span> m_L <span class="token operator">*</span> m_W <span class="token operator">*</span> m_H<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token comment">// 长</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token keyword">int</span> m_L<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token comment">// 宽</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token keyword">int</span> m_W<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token comment">// 髙</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">int</span> m_H<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token keyword">bool</span> <span class="token function">isSame</span><span class="token punctuation">(</span>Cube <span class="token operator">&amp;</span>c1<span class="token punctuation">,</span> Cube <span class="token operator">&amp;</span>c2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>c1<span class="token punctuation">.</span><span class="token function">getML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> c2<span class="token punctuation">.</span><span class="token function">getML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> c1<span class="token punctuation">.</span><span class="token function">getMW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> c2<span class="token punctuation">.</span><span class="token function">getMW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> c1<span class="token punctuation">.</span><span class="token function">getMH</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> c2<span class="token punctuation">.</span><span class="token function">getMH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    <span class="token comment">// 实例化</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    Cube c1<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token comment">// 设置长宽高</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    c1<span class="token punctuation">.</span><span class="token function">setML</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>    c1<span class="token punctuation">.</span><span class="token function">setMW</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>    c1<span class="token punctuation">.</span><span class="token function">setMH</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre></pre></td></tr><tr><td data-num="74"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"长："</span> <span class="token operator">&lt;&lt;</span> c1<span class="token punctuation">.</span><span class="token function">getML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" 宽："</span> <span class="token operator">&lt;&lt;</span> c1<span class="token punctuation">.</span><span class="token function">getMW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" 髙："</span> <span class="token operator">&lt;&lt;</span> c1<span class="token punctuation">.</span><span class="token function">getMH</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="75"></td><td><pre></pre></td></tr><tr><td data-num="76"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"面积："</span> <span class="token operator">&lt;&lt;</span> c1<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" 体积："</span> <span class="token operator">&lt;&lt;</span> c1<span class="token punctuation">.</span><span class="token function">getVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre></pre></td></tr><tr><td data-num="78"></td><td><pre>    Cube c2<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    <span class="token comment">// 设置长宽高</span></pre></td></tr><tr><td data-num="80"></td><td><pre>    c2<span class="token punctuation">.</span><span class="token function">setML</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    c2<span class="token punctuation">.</span><span class="token function">setMW</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>    c2<span class="token punctuation">.</span><span class="token function">setMH</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre></pre></td></tr><tr><td data-num="84"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isSame</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"c1和c2是相等的"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="87"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="点和圆的关系-案例"><a class="anchor" href="#点和圆的关系-案例">#</a> 点和圆的关系 - 案例</h2><blockquote><p>设计一个圆形类 <code>(Circle)</code> , 和一个点类 <code>(Point)</code> , 并计算点和圆的关系。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>点和圆的关系</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 点和圆关系判断</pre></td></tr><tr><td data-num="3"></td><td><pre> * 点到圆心的距离 == 半径 点在园上</pre></td></tr><tr><td data-num="4"></td><td><pre> * 点到圆心的距离 > 半径 点在园外</pre></td></tr><tr><td data-num="5"></td><td><pre> * 点到圆心的距离 &lt; 半径 点在圆内</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">//#include "point.h"</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//#include "circle.h"</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 点类</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">return</span> m_X<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMX</span><span class="token punctuation">(</span><span class="token keyword">int</span> mX<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        m_X <span class="token operator">=</span> mX<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">return</span> m_Y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMY</span><span class="token punctuation">(</span><span class="token keyword">int</span> mY<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        m_Y <span class="token operator">=</span> mY<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">int</span> m_X<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">int</span> m_Y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">// 圆类</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">int</span> <span class="token function">getMR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token keyword">return</span> m_R<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMR</span><span class="token punctuation">(</span><span class="token keyword">int</span> mR<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>        m_R <span class="token operator">=</span> mR<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">const</span> Point <span class="token operator">&amp;</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        <span class="token keyword">return</span> m_Center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMCenter</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>mCenter<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>        m_Center <span class="token operator">=</span> mCenter<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">int</span> m_R<span class="token punctuation">;</span><span class="token comment">// 半径</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    Point m_Center<span class="token punctuation">;</span><span class="token comment">// 圆心</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token comment">// 判断点和圆的关系</span></pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token keyword">void</span> <span class="token function">isInCircle</span><span class="token punctuation">(</span>Circle <span class="token operator">&amp;</span>c<span class="token punctuation">,</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token comment">// 计算两点之间距离平方</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token keyword">int</span> distance <span class="token operator">=</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="64"></td><td><pre>                   <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token comment">// 计算半径的平方</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token keyword">int</span> rDistance <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getMR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> c<span class="token punctuation">.</span><span class="token function">getMR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    <span class="token comment">// 判断关系</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>distance <span class="token operator">==</span> rDistance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"点在圆上"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>distance <span class="token operator">></span> rDistance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="71"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"点在圆外"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="73"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"点在圆内"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="74"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="76"></td><td><pre></pre></td></tr><tr><td data-num="77"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="78"></td><td><pre>    <span class="token comment">// 创建圆</span></pre></td></tr><tr><td data-num="79"></td><td><pre>    Circle c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="80"></td><td><pre>    c<span class="token punctuation">.</span><span class="token function">setMR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre>    Point center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre>    center<span class="token punctuation">.</span><span class="token function">setMX</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="83"></td><td><pre>    center<span class="token punctuation">.</span><span class="token function">setMY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="84"></td><td><pre>    c<span class="token punctuation">.</span><span class="token function">setMCenter</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    <span class="token comment">// 创建点</span></pre></td></tr><tr><td data-num="86"></td><td><pre>    Point p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="87"></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">setMX</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="88"></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">setMY</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="89"></td><td><pre>    <span class="token function">isInCircle</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>以下是拆分设计</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>point.h</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once </span><span class="token comment">// 防止头文件重复包含</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 点类</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">int</span> <span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMX</span><span class="token punctuation">(</span><span class="token keyword">int</span> mX<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">int</span> <span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMY</span><span class="token punctuation">(</span><span class="token keyword">int</span> mY<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">int</span> m_X<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">int</span> m_Y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"><span>point.h</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"point.h"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token class-name">Point</span><span class="token double-colon punctuation">::</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> m_X<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Point</span><span class="token double-colon punctuation">::</span><span class="token function">setMX</span><span class="token punctuation">(</span><span class="token keyword">int</span> mX<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    m_X <span class="token operator">=</span> mX<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">int</span> <span class="token class-name">Point</span><span class="token double-colon punctuation">::</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> m_Y<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Point</span><span class="token double-colon punctuation">::</span><span class="token function">setMY</span><span class="token punctuation">(</span><span class="token keyword">int</span> mY<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    m_Y <span class="token operator">=</span> mY<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"><span>circle.h</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"point.h"</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">// 圆类</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">int</span> <span class="token function">getMR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMR</span><span class="token punctuation">(</span><span class="token keyword">int</span> mR<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">[</span><span class="token punctuation">[</span>nodiscard<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">const</span> Point <span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">setMCenter</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>mCenter<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">int</span> m_R<span class="token punctuation">;</span><span class="token comment">// 半径</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    Point m_Center<span class="token punctuation">;</span><span class="token comment">// 圆心</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"><span>circle.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle.h"</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token class-name">Circle</span><span class="token double-colon punctuation">::</span><span class="token function">getMR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">return</span> m_R<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Circle</span><span class="token double-colon punctuation">::</span><span class="token function">setMR</span><span class="token punctuation">(</span><span class="token keyword">int</span> mR<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    m_R <span class="token operator">=</span> mR<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">const</span> Point <span class="token class-name">Circle</span><span class="token double-colon punctuation">::</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> m_Center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">Circle</span><span class="token double-colon punctuation">::</span><span class="token function">setMCenter</span><span class="token punctuation">(</span><span class="token keyword">const</span> Point <span class="token operator">&amp;</span>mCenter<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    m_Center <span class="token operator">=</span> mCenter<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"><span>点和圆的关系.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 点和圆关系判断</pre></td></tr><tr><td data-num="3"></td><td><pre> * 点到圆心的距离 == 半径 点在园上</pre></td></tr><tr><td data-num="4"></td><td><pre> * 点到圆心的距离 > 半径 点在园外</pre></td></tr><tr><td data-num="5"></td><td><pre> * 点到圆心的距离 &lt; 半径 点在圆内</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"point.h"</span></span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"circle.h"</span></span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment">// 判断点和圆的关系</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">void</span> <span class="token function">isInCircle</span><span class="token punctuation">(</span>Circle <span class="token operator">&amp;</span>c<span class="token punctuation">,</span> Point <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 计算两点之间距离平方</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">int</span> distance <span class="token operator">=</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                   <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getMCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span><span class="token function">getMY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 计算半径的平方</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">int</span> rDistance <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">getMR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> c<span class="token punctuation">.</span><span class="token function">getMR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 判断关系</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>distance <span class="token operator">==</span> rDistance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"点在圆上"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>distance <span class="token operator">></span> rDistance<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"点在圆外"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"点在圆内"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 创建圆</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    Circle c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    c<span class="token punctuation">.</span><span class="token function">setMR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    Point center<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    center<span class="token punctuation">.</span><span class="token function">setMX</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    center<span class="token punctuation">.</span><span class="token function">setMY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    c<span class="token punctuation">.</span><span class="token function">setMCenter</span><span class="token punctuation">(</span>center<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token comment">// 创建点</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    Point p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">setMX</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">setMY</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token function">isInCircle</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="构造函数和析构函数"><a class="anchor" href="#构造函数和析构函数">#</a> 构造函数和析构函数</h2><blockquote><p>对象的初始化和清理也是两个非常重要的安全问题，一个对象或者变量没有初始状态，对其使用后果是未知同样的使用完一个对象或变量，没有及时清理，也会造成一定的安全问题，C++ 利用了构造函数和析构函数解决上述问题，这两个函数将会被编译器自动调用，完成对象初始化和清理工作。</p></blockquote><blockquote><p>对象的初始化和清理工作是编译器强制要我们做的事情，因此如果我们不提供构造和析构，编译器会提供，编译器提供的构造函数和析构函数是空实现。构造函数：主要作用在于创建对象时为对象的成员属性赋值，构造函数由编译器自动调用，无须手动调用。<br>析构函数：主要作用在于对象销毁前系统自动调用，执行一些清理工作。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 构造函数和析构函数</pre></td></tr><tr><td data-num="3"></td><td><pre>* 对象的初始化和清理也是两个非常重要的安全问题</pre></td></tr><tr><td data-num="4"></td><td><pre>*    一个对象或者变量没有初始状态，对其使用后果是未知</pre></td></tr><tr><td data-num="5"></td><td><pre>*    同样的使用完一个对象或变量，没有及时清理，也会造成一定的安全问题</pre></td></tr><tr><td data-num="6"></td><td><pre>* C++ 利用了构造函数和析构函数解决上述问题，这两个函数将会被编译器自动调用，完成对象初始化和清理工作。</pre></td></tr><tr><td data-num="7"></td><td><pre>* 对象的初始化和清理工作是编译器强制要我们做的事情，因此如果我们不提供构造和析构，编译器会提供</pre></td></tr><tr><td data-num="8"></td><td><pre>* 编译器提供的构造函数和析构函数是空实现。</pre></td></tr><tr><td data-num="9"></td><td><pre>*    构造函数：主要作用在于创建对象时为对象的成员属性赋值，构造函数由编译器自动调用，无须手动调用。</pre></td></tr><tr><td data-num="10"></td><td><pre>*    析构函数：主要作用在于对象销毁前系统自动调用，执行一些清理工作。</pre></td></tr><tr><td data-num="11"></td><td><pre>*/</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="17"></td><td><pre> 构造函数语法：类名 ()&#123;&#125;</pre></td></tr><tr><td data-num="18"></td><td><pre>1. 构造函数，没有返回值也不写 void</pre></td></tr><tr><td data-num="19"></td><td><pre>2. 函数名称与类名相同</pre></td></tr><tr><td data-num="20"></td><td><pre>3. 构造函数可以有参数，因此可以发生重载</pre></td></tr><tr><td data-num="21"></td><td><pre>4. 程序在调用对象时候会自动调用构造，无须手动调用，而且只会调用一次</pre></td></tr><tr><td data-num="22"></td><td><pre> */</pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">/*</span></pre></td></tr><tr><td data-num="25"></td><td><pre> 析构函数语法：类名 ()&#123;&#125;</pre></td></tr><tr><td data-num="26"></td><td><pre>1. 析构函数，没有返回值也不写 void</pre></td></tr><tr><td data-num="27"></td><td><pre>2. 函数名称与类名相司，在名称前加上符号～</pre></td></tr><tr><td data-num="28"></td><td><pre>3. 析构函数不可以有参数，因此不可以发生重载</pre></td></tr><tr><td data-num="29"></td><td><pre>4. 程序在对象销毁前会自动调用析构，无须手动调用，而且只会调用一次</pre></td></tr><tr><td data-num="30"></td><td><pre> */</pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">// 对象的初始化和清理</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token comment">// 1. 构造函数进行初始化操作</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person的构造函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token comment">// 2. 析构函数，进行清理操作</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person的析构函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">// 构造和析构都是必须有的实现，如果我们自己不提供，编译器会提供一个空实现的构造和析构</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    Person p<span class="token punctuation">;</span><span class="token comment">// 在栈上的数据，test01 执行完毕后，释放这个对象</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="构造函数的分类以及调用"><a class="anchor" href="#构造函数的分类以及调用">#</a> 构造函数的分类以及调用</h2><ul><li>构造函数的分离及调用有两种分类方式：<ul><li>按参数分为：有参构造和无参构造</li><li>按类型分为：普通构造和拷贝构造</li></ul></li><li>三种调用方式：<ul><li>括号法</li><li>显示法</li><li>隐式转换法</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>构造函数的分离及调用</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 构造函数的分离及调用</pre></td></tr><tr><td data-num="3"></td><td><pre> * 两种分类方式：</pre></td></tr><tr><td data-num="4"></td><td><pre> *  按参数分为：有参构造和无参构造</pre></td></tr><tr><td data-num="5"></td><td><pre> *  按类型分为：普通构造和拷贝构造</pre></td></tr><tr><td data-num="6"></td><td><pre> * 三种调用方式：</pre></td></tr><tr><td data-num="7"></td><td><pre> *  括号法</pre></td></tr><tr><td data-num="8"></td><td><pre> *  显示法</pre></td></tr><tr><td data-num="9"></td><td><pre> *  隐式转换法</pre></td></tr><tr><td data-num="10"></td><td><pre> */</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person的无参构造函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        age <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person的有参构造函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 拷贝构造函数</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">const</span> Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token comment">// 将传入的人身上的所有属性，拷贝到我身上</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        age <span class="token operator">=</span> p<span class="token punctuation">.</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person的拷贝构造函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person的析构函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token comment">// 1. 括号法</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token comment">//    Person p1;// 默认构造函数调用</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">//    Person p2 (10);// 有参构造函数</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token comment">//    Person p3 (p2);// 拷贝构造函数</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token comment">// 注意事项 1</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token comment">// 调用默认构造函数时候，不要加 ()</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token comment">//    cout &lt;&lt; "p2 的年龄：" &lt;&lt; p2.age &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token comment">//    cout &lt;&lt; "p3 的年龄：" &lt;&lt; p3.age &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">// 因为下面这行代码，编译器会认为是一个函数的声明，不会认为在创建对象</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token comment">//    Person p1();</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token comment">// 2. 显示法</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    Person p1<span class="token punctuation">;</span>  <span class="token comment">// ↓ 匿名对象语法：Person ()</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    Person p2 <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 有参构造函数</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    Person p3 <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 拷贝构造函数</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token comment">//    Person (20);// 匿名对象特点：当前行执行结束后，系统会立即回收掉匿名对象</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token comment">// 注意事项 2</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// 不用利用拷贝构造函数初始化匿名对象 编译器会认为 Person (p3) == Person p3;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token comment">//    Person (p3);// 错误</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token comment">// 3. 隐式转换法</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    Person p4 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 相当于写了 Person p4 = Person (10) 有参构造</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    Person p5 <span class="token operator">=</span> p4<span class="token punctuation">;</span> <span class="token comment">// 拷贝构造</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="70"></td><td><pre></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="72"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="拷贝构造函数调用时机"><a class="anchor" href="#拷贝构造函数调用时机">#</a> 拷贝构造函数调用时机</h2><ul><li>C++ 中拷贝构造函数调用时机通常有三种情况</li><li>1. 使用应该已经创建完毕的对象来初始化应该新对象</li><li>2. 值传递的方式给函数参数传值</li><li>3. 以值方式返回局部对象</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>拷贝构造函数调用时机</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 拷贝构造函数调用时机</pre></td></tr><tr><td data-num="3"></td><td><pre> * C++ 中拷贝构造函数调用时机通常有三种情况</pre></td></tr><tr><td data-num="4"></td><td><pre> * 1. 使用应该已经创建完毕的对象来初始化应该新对象</pre></td></tr><tr><td data-num="5"></td><td><pre> * 2. 值传递的方式给函数参数传值</pre></td></tr><tr><td data-num="6"></td><td><pre> * 3. 以值方式返回局部对象</pre></td></tr><tr><td data-num="7"></td><td><pre> */</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person无参构造函数调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        mAge <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person有参构造函数调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        mAge <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">const</span> Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person拷贝构造函数调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        mAge <span class="token operator">=</span> p<span class="token punctuation">.</span>mAge<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Person析构造函数调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token keyword">int</span> mAge<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token comment">// 1. 使用应该已经创建完毕的对象来初始化应该新对象</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    Person <span class="token function">p1</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    Person <span class="token function">p2</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"P2的年龄："</span> <span class="token operator">&lt;&lt;</span> p2<span class="token punctuation">.</span>mAge <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">// 2. 值传递的方式给函数参数传值</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">void</span> <span class="token function">doWork</span><span class="token punctuation">(</span>Person p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    Person p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token function">doWork</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token comment">// 3. 以值方式返回局部对象</span></pre></td></tr><tr><td data-num="55"></td><td><pre>Person <span class="token function">doWork2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    Person p1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>p1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token keyword">return</span> <span class="token function">Person</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="60"></td><td><pre></pre></td></tr><tr><td data-num="61"></td><td><pre><span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    Person p <span class="token operator">=</span> <span class="token function">doWork2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>p <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token comment">//    test01();</span></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token comment">//    test02();</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="构造函数调用规则"><a class="anchor" href="#构造函数调用规则">#</a> 构造函数调用规则</h2><ul><li>默认情况下 C++ 编译器至少给一个类添加三个函数<ul><li>默认构造函数 (无参，函数体为空)</li><li>默认析构函数 (无参，函数体为空)</li><li>默认拷贝构造函数，对属性进行值拷贝</li></ul></li><li>构造函数调用规则如下：</li><li>如果用户定义有参构造函数 C++ 不在提供默认无参构造，弹会提供默认拷贝构造</li><li>如果用户定义拷贝构造函数 C++ 不会在提供其他构造函数</li><li>总结：如果属性有在堆区开辟的，一定要自己提供拷贝构造函数，防止浅拷贝带来的问题</li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>构造函数调用规则</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 构造函数调用规则</pre></td></tr><tr><td data-num="3"></td><td><pre> * 默认情况下 C++ 编译器至少给一个类添加三个函数</pre></td></tr><tr><td data-num="4"></td><td><pre> * 1. 默认构造函数 (无参，函数体为空)</pre></td></tr><tr><td data-num="5"></td><td><pre> * 2. 默认析构函数 (无参，函数体为空)</pre></td></tr><tr><td data-num="6"></td><td><pre> * 3. 默认拷贝构造函数，对属性进行值拷贝</pre></td></tr><tr><td data-num="7"></td><td><pre> *</pre></td></tr><tr><td data-num="8"></td><td><pre> * 构造函数调用规则如下：</pre></td></tr><tr><td data-num="9"></td><td><pre> *  如果用户定义有参构造函数 C++ 不在提供默认无参构造，弹会提供默认拷贝构造</pre></td></tr><tr><td data-num="10"></td><td><pre> *  如果用户定义拷贝构造函数 C++ 不会在提供其他构造函数</pre></td></tr><tr><td data-num="11"></td><td><pre> *  总结：如果属性有在堆区开辟的，一定要自己提供拷贝构造函数，防止浅拷贝带来的问题</pre></td></tr><tr><td data-num="12"></td><td><pre> */</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 无参 (默认) 构造函数</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"无参构造函数的调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 有参构造函数</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        age <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"有参构造函数的调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">const</span> Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"拷贝构造函数的调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        age <span class="token operator">=</span> p<span class="token punctuation">.</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">//        m_Height = new int (*p.m_Height); // 深拷贝 new int 代表重新在堆区开辟一个新内存空间</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">// 析构函数</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"析构函数的调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    Person p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    Person <span class="token function">p2</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p2的年龄为："</span> <span class="token operator">&lt;&lt;</span> p2<span class="token punctuation">.</span>age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="深拷贝与浅拷贝"><a class="anchor" href="#深拷贝与浅拷贝">#</a> 深拷贝与浅拷贝</h2><blockquote><p>深浅拷贝是面试经典问题，也是常见的一个坑，浅拷贝：简单的赋值拷贝操作，深拷贝：在堆区重新申请空间，进行拷贝操作</p></blockquote><h2 id="初始化列表"><a class="anchor" href="#初始化列表">#</a> 初始化列表</h2><blockquote><p>作用： <code>C++</code> 提供了初始化列表语法，用来初始化属性，语法： <code>构造函数(): 属性1(值1),属性2(值2)....&#123; &#125;</code></p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>初始化列表</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 初始化列表</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：C++ 提供了初始化列表语法，用来初始化属性</pre></td></tr><tr><td data-num="4"></td><td><pre> * 语法：构造函数 (): 属性 1 (值 1), 属性 2 (值 2)...&#123; &#125;</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">//    Person(int a,int b,int c)&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">//        this->a = a;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">//        this->b = b;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">//        this->c = c;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//    &#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 使用初始化列表初始化属性</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token comment">// 方法 1</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">m_A</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_B</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_C</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 方法 2</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">,</span><span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">m_A</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_B</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_C</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">int</span> m_C<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    Person <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A = "</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"B = "</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>m_B <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"C = "</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>m_C <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="类对象作为类成员"><a class="anchor" href="#类对象作为类成员">#</a> 类对象作为类成员</h2><blockquote><p><code>C++</code> 类中的成员是可以另一个类的对象，我们称该成员为对象成员</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>类对象作为类成员</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 类对象作为类成员</pre></td></tr><tr><td data-num="3"></td><td><pre> * C++ 类中的成员是可以另一个类的对象，我们称该成员为对象成员</pre></td></tr><tr><td data-num="4"></td><td><pre>*/</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A class构造函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"A class析构函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">int</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"B class构造函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"B class析构函数被调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>     A a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    B b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token comment">/**</span></pre></td></tr><tr><td data-num="44"></td><td><pre>     * 调用结果：</pre></td></tr><tr><td data-num="45"></td><td><pre>     *  A class 构造函数被调用</pre></td></tr><tr><td data-num="46"></td><td><pre>     *  B class 构造函数被调用</pre></td></tr><tr><td data-num="47"></td><td><pre>     *  B class 析构函数被调用</pre></td></tr><tr><td data-num="48"></td><td><pre>     *  A class 析构函数被调用</pre></td></tr><tr><td data-num="49"></td><td><pre>     */</pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="静态成员"><a class="anchor" href="#静态成员">#</a> 静态成员</h2><blockquote><p>静态成员就是在成员变量和成员函数前加上关键字 <code>static</code> , 称为静态成员。</p></blockquote><ul><li>静态成员分为：<ul><li>静态成员变量：<ul><li>所有对象共享同一份数据</li><li>在编译阶段分配内存</li><li>类内声明，类外初始化</li></ul></li><li>静态成员函数<ul><li>所有对象共享同一个函数</li><li>静态成员函数只能访问静态成员变量</li></ul></li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>静态成员变量.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 静态成员变量</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">//1. 所有对象都共享同一份数据</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">//2. 编译阶段就分配内存</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">//3. 类内声明，类外初始化操作</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">int</span> m_A<span class="token punctuation">;</span> <span class="token comment">// 静态成员变量也是有访问权限的</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">int</span> Person<span class="token double-colon punctuation">::</span>m_A <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">int</span> Person<span class="token double-colon punctuation">::</span>m_B <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    Person p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    Person p2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    p2<span class="token punctuation">.</span>m_A <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token comment">// 静态成员变量不属于某个对象上，所有对象都共享同一份数据</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">// 因此静态成员变量有两种访问方式</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">//1. 通过对象进行访问</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment">//    Person p;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token comment">//    cout &lt;&lt; p.m_A &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">//2. 通过类名进行访问</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> Person<span class="token double-colon punctuation">::</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token comment">//    cout &lt;&lt; Person::m_B &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">//    test01();</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"><span>静态成员函数.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 静态成员函数</pre></td></tr><tr><td data-num="3"></td><td><pre> * 所有对象共享同一个函数</pre></td></tr><tr><td data-num="4"></td><td><pre> * 静态成员函数只能访问静态成员变量</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token comment">// 静态成员函数可以访问静态成员变量</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">//        m_B = 200; 静态成员函数 不可以访问非静态成员变量，因为编译器无法区分到底是哪个对象的 m_B 属性</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"static void func调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// 静态成员函数也是有访问权限的</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">func2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"static void func2调用"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre> <span class="token keyword">int</span> Person<span class="token double-colon punctuation">::</span>m_A <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token comment">// 1. 通过对象进行访问</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    Person p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">// 2. 通过类名进行访问</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token class-name">Person</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="c对象模型和this指针"><a class="anchor" href="#c对象模型和this指针">#</a> C++ 对象模型和 this 指针</h2><h3 id="成员变量和成员函数分开存储"><a class="anchor" href="#成员变量和成员函数分开存储">#</a> 成员变量和成员函数分开存储</h3><blockquote><p>在 <code>C++</code> 中，类内的成员变量和成员函数分开存储，只有非静态成员变量才属于类的对象上</p></blockquote><h3 id="this指针概念"><a class="anchor" href="#this指针概念">#</a> this 指针概念</h3><details class="info"><summary>this指针概念</summary><div><p><code>this</code> 指针是隐含每一个非静态成员函数内的一种指针，this 指针不需要定义，直接使用即可。</p></div></details><blockquote><p><code>this</code> 指针的用途： 当形参和成员变量同名时，我们就可以使用 this 指针来进行区分，在类的非静态成员函数中返回对象本身，，可使用 <code>return *this</code> 。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>this指针概念.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * this 指针概念</pre></td></tr><tr><td data-num="3"></td><td><pre> * this 指针是隐含每一个非静态成员函数内的一种指针</pre></td></tr><tr><td data-num="4"></td><td><pre> * this 指针不需要定义，直接使用即可</pre></td></tr><tr><td data-num="5"></td><td><pre> *</pre></td></tr><tr><td data-num="6"></td><td><pre> * this 指针的用途：</pre></td></tr><tr><td data-num="7"></td><td><pre> *  当形参和成员变量同名时，我们就可以使用 this 指针来进行区分</pre></td></tr><tr><td data-num="8"></td><td><pre> *  在类的非静态成员函数中返回对象本身，，可使用 return *this</pre></td></tr><tr><td data-num="9"></td><td><pre> */</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">//this 指针指向被调用的成员函数所属的对象</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    Person<span class="token operator">&amp;</span> <span class="token function">PersonAddAge</span><span class="token punctuation">(</span>Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">+=</span>p<span class="token punctuation">.</span>age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">// 1. 解决名称冲突问题</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    Person <span class="token function">p1</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1的年龄为："</span> <span class="token operator">&lt;&lt;</span> p1<span class="token punctuation">.</span>age <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token comment">// 2. 返回对象本身用 *this</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    Person <span class="token function">p1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    Person <span class="token function">p2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token comment">// 链式编程</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    p2<span class="token punctuation">.</span><span class="token function">PersonAddAge</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">PersonAddAge</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">PersonAddAge</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p2的年龄为："</span> <span class="token operator">&lt;&lt;</span> p2<span class="token punctuation">.</span>age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="空指针访问成员函数"><a class="anchor" href="#空指针访问成员函数">#</a> 空指针访问成员函数</h3><blockquote><p><code>C++</code> 中空指针也是可以调用成员函数的，但是也要注意有没有用到 <code>this</code> 指针，如果用到 <code>this</code> 指针，需要加以判断保证代码的健壮性。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>控制在访问成员函数.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 控制在访问成员函数</pre></td></tr><tr><td data-num="3"></td><td><pre> * C++ 中空指针也是可以调用成员函数的，但是要注意有没有使用到 this 指针</pre></td></tr><tr><td data-num="4"></td><td><pre> *  如果有使用到 this 指针，就需要加以判断保证代码的健壮性</pre></td></tr><tr><td data-num="5"></td><td><pre> */</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 空指针访问成员函数</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">showClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"this is person class"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">showPersonAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token keyword">return</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token comment">// 错误：原因是因为传入的指针是为 NULL</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"age = "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    Person <span class="token operator">*</span>p <span class="token operator">=</span><span class="token keyword">nullptr</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    p<span class="token operator">-></span><span class="token function">showClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    p<span class="token operator">-></span><span class="token function">showPersonAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="const修饰成员函数"><a class="anchor" href="#const修饰成员函数">#</a> const 修饰成员函数</h3><ul><li>常函数：<ul><li>成员函数后加 const 后我们称为这个函数为常函数</li><li>常函数内不可以修改成员属性</li><li>成员属性声明时加上 mutable 关键字后，在常函数中依然可以修改</li></ul></li><li>常对象：<ul><li>声明对象前加上 const 称为该对象为常对象</li><li>常对象只能调用常函数</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>const修饰成员函数.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* const 修饰成员函数</pre></td></tr><tr><td data-num="3"></td><td><pre> * 常函数：</pre></td></tr><tr><td data-num="4"></td><td><pre> *      成员函数后加 const 后我们称为这个函数为常函数</pre></td></tr><tr><td data-num="5"></td><td><pre> *      常函数内不可以修改成员属性</pre></td></tr><tr><td data-num="6"></td><td><pre> *      成员属性声明时加上 mutable 关键字后，在常函数中依然可以修改</pre></td></tr><tr><td data-num="7"></td><td><pre> *</pre></td></tr><tr><td data-num="8"></td><td><pre> * 常对象：</pre></td></tr><tr><td data-num="9"></td><td><pre> *      声明对象前加上 const 称为该对象为常对象</pre></td></tr><tr><td data-num="10"></td><td><pre> *      常对象只能调用常函数</pre></td></tr><tr><td data-num="11"></td><td><pre>*/</pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">// 常函数</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        m_B <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"m_B的值为："</span> <span class="token operator">&lt;&lt;</span> m_B <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 常函数</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">//this 指针的本质是指针常量 指针的指向是不可以修改的</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token comment">// 在成员函数后面加 const 修饰的是 this 指向，让指针指向的值夜不可以修改</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">showPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        m_B <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token comment">//        this -> m_A = 100;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">//        this = NULL; //this 指针是不可以修改指针的指向的</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">mutable</span> <span class="token keyword">int</span> m_B<span class="token punctuation">;</span><span class="token comment">// 特殊变量，即使在常函数中，也可以修改这个值</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    Person p1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    p1<span class="token punctuation">.</span><span class="token function">showPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">// 常对象</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token keyword">const</span> Person p<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// 在对象前加上 const, 变为常对象</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token comment">//   p.m_A = 100;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    p<span class="token punctuation">.</span>m_B <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">//m_B 因为添加了 mutable 关键字，在常对象下也是可以修改</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token comment">// 常对象只能调用常函数</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    p<span class="token punctuation">.</span><span class="token function">showPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">//    p.func (); // 因为常对象不可以调用普通的成员函数，另外普通函数是可以修改成员函数的</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>    Person p2<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre>    p2<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="友元"><a class="anchor" href="#友元">#</a> 友元</h2><blockquote><p>在生活中你的家里有客厅 (public) 有卧室 <code>(private)</code> , 客厅所有来的客人都可以进去，但是你的卧室是私有的，也加上说只有你自己可以进去。 但是，你也可以允许你的好朋友进去，在程序中，有些是私有属性，也想让类外特殊的一些函数或者类进行访问，就需要用到友元的技术了，友元的目的是让一个函数或者类访问另应该类中私有的成员。 友元的关键字为： <code>friend</code> 。</p></blockquote><ul><li>友元的三种实现：<ul><li>全局函数做友元</li><li>类做友元</li><li>成员函数做友元</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>友元-全局函数做友元.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 友元</pre></td></tr><tr><td data-num="3"></td><td><pre> * 在生活中你的家里有客厅 (public) 有卧室 (private)</pre></td></tr><tr><td data-num="4"></td><td><pre> * 客厅所有来的客人都可以进去，但是你的卧室是私有的，也加上说只有你自己可以进去</pre></td></tr><tr><td data-num="5"></td><td><pre> * 但是，你也可以允许你的好朋友进去</pre></td></tr><tr><td data-num="6"></td><td><pre> *</pre></td></tr><tr><td data-num="7"></td><td><pre> * 在程序中，有些是私有属性，也想让类外特殊的一些函数或者类进行访问，就需要用到友元的技术了</pre></td></tr><tr><td data-num="8"></td><td><pre> *</pre></td></tr><tr><td data-num="9"></td><td><pre> * 友元的目的是让一个函数或者类访问另应该类中私有的成员</pre></td></tr><tr><td data-num="10"></td><td><pre> *</pre></td></tr><tr><td data-num="11"></td><td><pre> * 友元的关键字为：friend</pre></td></tr><tr><td data-num="12"></td><td><pre> *</pre></td></tr><tr><td data-num="13"></td><td><pre> * 友元的三种实现：</pre></td></tr><tr><td data-num="14"></td><td><pre> *      全局函数做友元</pre></td></tr><tr><td data-num="15"></td><td><pre> *      类做友元</pre></td></tr><tr><td data-num="16"></td><td><pre> *      成员函数做友元</pre></td></tr><tr><td data-num="17"></td><td><pre>*/</pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 1. 全局函数做友元</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">// 建筑类</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Building</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token comment">// 函数的声明</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token comment">//goodGay 全局函数是 Building 的好朋友，加上 friend 关键字后就可以访问 Building 中的私有成员</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token function">goodGay</span><span class="token punctuation">(</span>Building <span class="token operator">&amp;</span>building<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token function">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        m_SittingRoom <span class="token operator">=</span> <span class="token string">"客厅"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        m_BedRoom <span class="token operator">=</span> <span class="token string">"卧室"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    string m_SittingRoom<span class="token punctuation">;</span> <span class="token comment">// 客厅</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    string m_BedRoom<span class="token punctuation">;</span> <span class="token comment">// 卧室</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">// 全局函数</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">void</span> <span class="token function">goodGay</span><span class="token punctuation">(</span>Building <span class="token operator">&amp;</span>building<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"好基友全局函数 正在访问："</span> <span class="token operator">&lt;&lt;</span> building<span class="token punctuation">.</span>m_SittingRoom <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"好基友全局函数 正在访问："</span> <span class="token operator">&lt;&lt;</span> building<span class="token punctuation">.</span>m_BedRoom <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    Building building<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token function">goodGay</span><span class="token punctuation">(</span>building<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"><span>友元-类做友元.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 类做友元</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Building</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">GoodGay</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">GoodGay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 参观函数 访问 Building 中的属性</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    Building <span class="token operator">*</span>building<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Building</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">//    friend void GoodGay::visit();</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">//GoodGay 类是本来的好朋友，可以访问本类中的私有成员</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">friend</span> <span class="token keyword">class</span> <span class="token class-name">GoodGay</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token function">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    string m_SittingRoom<span class="token punctuation">;</span> <span class="token comment">// 客厅</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    string m_BedRoom<span class="token punctuation">;</span> <span class="token comment">// 卧室</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">// 在类外写成员函数</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token class-name">Building</span><span class="token double-colon punctuation">::</span><span class="token function">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    m_SittingRoom <span class="token operator">=</span> <span class="token string">"客厅"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    m_BedRoom <span class="token operator">=</span> <span class="token string">"卧室"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token class-name">GoodGay</span><span class="token double-colon punctuation">::</span><span class="token function">GoodGay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    building <span class="token operator">=</span> <span class="token keyword">new</span> Building<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">GoodGay</span><span class="token double-colon punctuation">::</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"GoodGay正在访问："</span> <span class="token operator">&lt;&lt;</span> building<span class="token operator">-></span>m_SittingRoom <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"GoodGay正在访问："</span> <span class="token operator">&lt;&lt;</span> building<span class="token operator">-></span>m_BedRoom <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    GoodGay g<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    g<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight cpp"><figcaption data-lang="C++"><span>友元-成员函数做友元.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 成员函数做友元</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Building</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">GoodGay</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">GoodGay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 让 visit 函数可以访问 Building 中的私有成员</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">visit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 让 visit2 函数不可以访问 Building 中的私有成员</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">visit2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    Building <span class="token operator">*</span>building<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Building</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 告诉编译器 GoodGay 类下的 visit 成员函数作为本类的好朋友，可以访问私有成员</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">friend</span> <span class="token keyword">void</span> <span class="token class-name">GoodGay</span><span class="token double-colon punctuation">::</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token function">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token comment">// 客厅</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    string m_SittingRoom<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token comment">// 卧室</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    string m_BedRoom<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token comment">// 类外实现成员函数</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token class-name">GoodGay</span><span class="token double-colon punctuation">::</span><span class="token function">GoodGay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token comment">// 创建 Building</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    building <span class="token operator">=</span> <span class="token keyword">new</span> Building<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">GoodGay</span><span class="token double-colon punctuation">::</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"GoodGay.visit()函数正在访问"</span> <span class="token operator">&lt;&lt;</span> building<span class="token operator">-></span>m_SittingRoom <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"GoodGay.visit()函数正在访问"</span> <span class="token operator">&lt;&lt;</span> building<span class="token operator">-></span>m_BedRoom <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token keyword">void</span> <span class="token class-name">GoodGay</span><span class="token double-colon punctuation">::</span><span class="token function">visit2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"GoodGay.visit2()函数正在访问"</span> <span class="token operator">&lt;&lt;</span> building<span class="token operator">-></span>m_SittingRoom <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">//    cout &lt;&lt; "GoodGay.visit2 () 函数正在访问" &lt;&lt; building->m_BedRoom &lt;&lt; endl;</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token class-name">Building</span><span class="token double-colon punctuation">::</span><span class="token function">Building</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    m_SittingRoom <span class="token operator">=</span> <span class="token string">"客厅"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    m_BedRoom <span class="token operator">=</span> <span class="token string">"卧室"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    GoodGay g<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    g<span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    g<span class="token punctuation">.</span><span class="token function">visit2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="65"></td><td><pre></pre></td></tr><tr><td data-num="66"></td><td><pre></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="运算符重载"><a class="anchor" href="#运算符重载">#</a> 运算符重载</h2><blockquote><p>运算符重载概念：对已有的运算符重载进行定义，赋予其另一种功能，以适应不同的数据类型。</p></blockquote><h3 id="加号运算符重载"><a class="anchor" href="#加号运算符重载">#</a> 加号运算符重载</h3><blockquote><p>作用：实现两个自定义数据类型相加的运算，请勿滥用运算符重载，如：加法运算重载成减法运算。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>加号运算符重载.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 加号运算符重载</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：实现两个自定义数据类型相加的运算</pre></td></tr><tr><td data-num="4"></td><td><pre> * 总结 1：对于内置的数据类型的表达式的运算符是不可以改变的，如：1+1 = 0</pre></td></tr><tr><td data-num="5"></td><td><pre> * 总结 2：不要滥用运算符重载</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 1. 成员函数重载 + 号</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">//    Person operator+(Person &amp;p) &#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">//        Person temp;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">//        temp.m_A = this->m_A + p.m_A;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">//        temp.m_B = this->m_B + p.m_B;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">//        return temp;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">//    &#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">// 2. 全局函数重载 + 号</span></pre></td></tr><tr><td data-num="27"></td><td><pre>Person <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>Person <span class="token operator">&amp;</span>p1<span class="token punctuation">,</span> Person <span class="token operator">&amp;</span>p2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    Person temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    temp<span class="token punctuation">.</span>m_A <span class="token operator">=</span> p1<span class="token punctuation">.</span>m_A <span class="token operator">+</span> p2<span class="token punctuation">.</span>m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    temp<span class="token punctuation">.</span>m_B <span class="token operator">=</span> p1<span class="token punctuation">.</span>m_B <span class="token operator">+</span> p2<span class="token punctuation">.</span>m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">return</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>Person <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>Person <span class="token operator">&amp;</span>p1<span class="token punctuation">,</span> <span class="token keyword">int</span> nuber<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    Person temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    temp<span class="token punctuation">.</span>m_A <span class="token operator">=</span> p1<span class="token punctuation">.</span>m_A <span class="token operator">+</span> nuber<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    temp<span class="token punctuation">.</span>m_B <span class="token operator">=</span> p1<span class="token punctuation">.</span>m_B <span class="token operator">+</span> nuber<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">return</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    Person p1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    p1<span class="token punctuation">.</span>m_A <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    p1<span class="token punctuation">.</span>m_B <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    Person p2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    p2<span class="token punctuation">.</span>m_A <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    p2<span class="token punctuation">.</span>m_B <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token comment">// 成员函数重载本质调用</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token comment">//    Person p3 = p1.operator+(p2);</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token comment">// 全局函数重载本质调用</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token comment">//    Person p3 = operator+(p1,p2);</span></pre></td></tr><tr><td data-num="54"></td><td><pre></pre></td></tr><tr><td data-num="55"></td><td><pre>    Person p3 <span class="token operator">=</span> p1 <span class="token operator">+</span> p2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p3.m_A = "</span> <span class="token operator">&lt;&lt;</span> p3<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p3.m_B = "</span> <span class="token operator">&lt;&lt;</span> p3<span class="token punctuation">.</span>m_B <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token comment">// 运算符重载，也可以发生函数重载</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre>    Person p4 <span class="token operator">=</span> p1 <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p4.m_A = "</span> <span class="token operator">&lt;&lt;</span> p4<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p4.m_B = "</span> <span class="token operator">&lt;&lt;</span> p4<span class="token punctuation">.</span>m_B <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="68"></td><td><pre></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="左移运算符重载"><a class="anchor" href="#左移运算符重载">#</a> 左移运算符重载</h3><blockquote><p>作用：可以输出自定义数据类型。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>左移运算符重载.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 左移运算符重载</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：可以输出自定义数据类型</pre></td></tr><tr><td data-num="4"></td><td><pre> * 总结：重载左移运算符配合友元可以实现输出自定义数据类型</pre></td></tr><tr><td data-num="5"></td><td><pre>*/</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">friend</span> ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>cout<span class="token punctuation">,</span> Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>m_A <span class="token operator">=</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>m_B <span class="token operator">=</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment">// 重载 &lt;&lt; 左移运算符</span></pre></td></tr><tr><td data-num="26"></td><td><pre>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>cout<span class="token punctuation">,</span> Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"m_A = "</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> <span class="token string">" m_B = "</span> <span class="token operator">&lt;&lt;</span> p<span class="token punctuation">.</span>m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">return</span> cout<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    Person <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> p <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="递增运算符重载"><a class="anchor" href="#递增运算符重载">#</a> 递增运算符重载</h3><blockquote><p>作用：通过重载递增运算符，实现对自己的整型数据进行自增。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>递增运算符重载.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 递增运算符重载</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：通过重载递增运算符，实现自己的整型数据</pre></td></tr><tr><td data-num="4"></td><td><pre> * 总结：前置递增返回引用，后置递增返回值</pre></td></tr><tr><td data-num="5"></td><td><pre>*/</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyInteger</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">friend</span> ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>cout<span class="token punctuation">,</span> MyInteger myint<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// 重载前置 ++ 运算符</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 返回引用是为了一直对一个数据进行递增操作</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    MyInteger <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token comment">// 需要先进行 ++ 运算</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        m_Num<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token comment">// 再将自身做返回</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 重载后置 ++ 运算符</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">//int 代表占位参数，可以用于区分前置和后置递增</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    MyInteger <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">// 先 记录当前结果</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        MyInteger temp <span class="token operator">=</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token comment">// 后 递增</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        m_Num<span class="token operator">++</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token comment">// 最后将记录结果返回</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token keyword">return</span> temp<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token function">MyInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        m_Num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token keyword">int</span> m_Num<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">// 重载左移运算符</span></pre></td></tr><tr><td data-num="45"></td><td><pre>ostream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream <span class="token operator">&amp;</span>cout<span class="token punctuation">,</span> MyInteger myint<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> myint<span class="token punctuation">.</span>m_Num<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">return</span> cout<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    MyInteger myInteger<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token operator">++</span><span class="token punctuation">(</span><span class="token operator">++</span>myInteger<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> myInteger <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    MyInteger myInteger<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span>  myInteger<span class="token operator">++</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span>  myInteger<span class="token operator">++</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span>  myInteger<span class="token operator">++</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span>  myInteger<span class="token operator">++</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="赋值运算符重载"><a class="anchor" href="#赋值运算符重载">#</a> 赋值运算符重载</h3><ul><li><code>C++</code> 编译器至少给一个类添加四个函数<ul><li>默认构造函数 (无参，函数体为空)</li><li>默认析构函数 (无参，函数体为空)</li><li>默认拷贝构造函数，对属性进行值拷贝</li><li>赋值运算符 <code>operator=</code> , 对属性进行值拷贝</li></ul></li></ul><blockquote><p>如果类中有属性指向堆区，做赋值操作时也会出现深浅拷贝的问题。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>赋值运算符重载.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 赋值运算符重载</pre></td></tr><tr><td data-num="3"></td><td><pre>*/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span><span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        m_Age <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token operator">~</span><span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_Age <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token keyword">delete</span> m_Age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>            m_Age <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 重载 赋值运算符</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    Person <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token comment">// 编译器是提供浅拷贝</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">//        m_Age = p.m_Age;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token comment">// 应该先判断是否有属性在堆区，如果有就需要先释放干净，然后在进行深拷贝</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>m_Age <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">delete</span> m_Age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>            m_Age <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token comment">// 深拷贝</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        m_Age <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">.</span>m_Age<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token comment">// 返回自身引用</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>m_Age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    Person <span class="token function">p1</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    Person <span class="token function">p2</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    Person <span class="token function">p3</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    p3 <span class="token operator">=</span> p2 <span class="token operator">=</span> p1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1的年龄为："</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>p1<span class="token punctuation">.</span>m_Age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p2的年龄为："</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>p2<span class="token punctuation">.</span>m_Age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p2的年龄为："</span> <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>p3<span class="token punctuation">.</span>m_Age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="关系运算符重载"><a class="anchor" href="#关系运算符重载">#</a> 关系运算符重载</h3><blockquote><p>作用：重载关系运算符，可以让两个自定义类型对象进行对比操作。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>关系运算符重载.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 关系运算符重载</pre></td></tr><tr><td data-num="3"></td><td><pre> * 作用：重载关系运算符，可以让两个自定义类型对象进行对比操作</pre></td></tr><tr><td data-num="4"></td><td><pre>*/</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">Person</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">=</span> name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">=</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token comment">// 重载关系运算符 ==</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span>Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">==</span> p<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">==</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span>Person <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-></span>name <span class="token operator">==</span> p<span class="token punctuation">.</span>name <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token operator">-></span>age <span class="token operator">==</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">int</span> age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    string name<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    Person <span class="token function">p1</span><span class="token punctuation">(</span><span class="token string">"Tom2"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    Person <span class="token function">p2</span><span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>p1 <span class="token operator">==</span> p2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1 和 p2是相等的！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1 和 p2是不相等的！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>p1 <span class="token operator">!=</span> p2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1 和 p2是不相等的！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"p1 和 p2是相等的！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="54"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="函数调用运算符重载"><a class="anchor" href="#函数调用运算符重载">#</a> 函数调用运算符重载</h3><blockquote><p>函数调用运算符 <code>()</code> 也是可以重载，由于重载后使用的方式非常像函数的调用，因此称为仿函数，仿函数没有固定的写法，因此非常灵活。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>函数调用运算符重载.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 函数调用运算符重载</pre></td></tr><tr><td data-num="3"></td><td><pre> * 函数调用运算符 "()" 小括号也可以重载</pre></td></tr><tr><td data-num="4"></td><td><pre> * 由于重载后使用的方式非常像函数的调用，因此称为仿函数</pre></td></tr><tr><td data-num="5"></td><td><pre> * 仿函数没有固定写法，非常灵活</pre></td></tr><tr><td data-num="6"></td><td><pre> */</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyPrint</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 重载函数调用运算符 仿函数</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>string test<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> test <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    MyPrint myPrint<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 由于使用起来非常类似于函数调用，因此称为仿函数</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">myPrint</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">// 仿函数 - 加法类</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MyAdd</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">int</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> num1<span class="token punctuation">,</span> <span class="token keyword">int</span> num2<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    MyAdd add<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"i："</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token comment">// 匿名函数对象</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token function">MyAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="继承"><a class="anchor" href="#继承">#</a> 继承</h2><blockquote><p>继承是面向对象三大特性之一，继承的基本语法： <code>class 子类类名:访问权限 父类类名</code></p></blockquote><h3 id="继承方式"><a class="anchor" href="#继承方式">#</a> 继承方式</h3><ul><li>继承的语法： <code>class 子类:继承方式 父类</code></li><li>继承方式一共有三种：<ul><li>公共继承</li><li>保护继承</li><li>私有继承</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>继承方式.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 继承方式</pre></td></tr><tr><td data-num="3"></td><td><pre> * 继承语法：class 子类：继承方式 父类</pre></td></tr><tr><td data-num="4"></td><td><pre> * 继承方式一共有三种：</pre></td></tr><tr><td data-num="5"></td><td><pre> *  公共继承</pre></td></tr><tr><td data-num="6"></td><td><pre> *  保护继承</pre></td></tr><tr><td data-num="7"></td><td><pre> *  私有继承</pre></td></tr><tr><td data-num="8"></td><td><pre>*/</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">// 继承方式</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">// 公共继承</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base1</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">int</span> m_C<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son1</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base1</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token comment">// 父类中的公共权限成员，到了子类中依然是公共权限</span></pre></td></tr><tr><td data-num="29"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token comment">// 父类中的保护权限成员，到了子类中依然是保护权限</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        m_B <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment">//        m_C = 10; 父类中的私有权限成员，在子类中是无法访问的</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son1 func() m_A："</span> <span class="token operator">&lt;&lt;</span> m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son1 func() m_B："</span> <span class="token operator">&lt;&lt;</span> m_B <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="39"></td><td><pre>    Son1 son1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    son1<span class="token punctuation">.</span>m_A <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    son1<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token comment">// 保护继承</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base2</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token keyword">int</span> m_C<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son2</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">protected</span> <span class="token class-name">Base2</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="55"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>        <span class="token comment">// 父类中公共成员，到子类中变为保护权限</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>        <span class="token comment">// 父类中保护成员，到子类中变为保护权限</span></pre></td></tr><tr><td data-num="60"></td><td><pre>        m_B <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>        <span class="token comment">// 父类中私有成员，子类依旧无法访问</span></pre></td></tr><tr><td data-num="62"></td><td><pre><span class="token comment">//        m_C = 100;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son2 func() m_A："</span> <span class="token operator">&lt;&lt;</span> m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="64"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son2 func() m_B："</span> <span class="token operator">&lt;&lt;</span> m_B <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    Son2 son2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    son2<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="72"></td><td><pre></pre></td></tr><tr><td data-num="73"></td><td><pre><span class="token comment">// 私有继承</span></pre></td></tr><tr><td data-num="74"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base3</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="76"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="77"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="78"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="79"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="80"></td><td><pre>    <span class="token keyword">int</span> m_C<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="81"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="82"></td><td><pre></pre></td></tr><tr><td data-num="83"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son3</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">private</span> <span class="token class-name">Base3</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="84"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="85"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="86"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span><span class="token comment">// 父类中公共成员，到子类中变为私有权限</span></pre></td></tr><tr><td data-num="87"></td><td><pre>        m_B <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span><span class="token comment">// 父类中保护成员，到子类中变为私有权限</span></pre></td></tr><tr><td data-num="88"></td><td><pre>        <span class="token comment">//m_C = 1000; 我们在使用私有继承，依旧是访问不到父类中的私有成员</span></pre></td></tr><tr><td data-num="89"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son3 func() m_A："</span> <span class="token operator">&lt;&lt;</span> m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="90"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son3 func() m_B："</span> <span class="token operator">&lt;&lt;</span> m_B <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="91"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="92"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="93"></td><td><pre></pre></td></tr><tr><td data-num="94"></td><td><pre><span class="token keyword">void</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="95"></td><td><pre>    Son3 son3<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="96"></td><td><pre>    son3<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="97"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="98"></td><td><pre></pre></td></tr><tr><td data-num="99"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="100"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="101"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="102"></td><td><pre>    <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="103"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="继承中的对象模型"><a class="anchor" href="#继承中的对象模型">#</a> 继承中的对象模型</h3><blockquote><p>问题：从父类继承过来的成员，，哪些属于子类对象中？</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 继承中的对象模型</pre></td></tr><tr><td data-num="3"></td><td><pre> * 总结：父类中私有成员也是被子类继承下去了，只是由编译器给隐藏后访问不到</pre></td></tr><tr><td data-num="4"></td><td><pre>*/</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">protected</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">int</span> m_B<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">private</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">int</span> m_C<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">int</span> m_D<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 父类中所有非静态成员属性都会被子类继承下去</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 父类中私有成员属性，是被编译器给隐藏了，因此无法访问，但是确实是被继承到了子类中</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token comment">// 16 字节</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"size of Son = "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>Son<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="35"></td><td><pre>* D:\CLionProjects\Demo\ 类和对象 \ 继承 > c1 /d1 reportSingleClassLayoutSon 继承中的对象模型.cpp</pre></td></tr><tr><td data-num="36"></td><td><pre>'c1' 不是内部或外部命令，也不是可运行的程序</pre></td></tr><tr><td data-num="37"></td><td><pre>或批处理文件。</pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>D:\CLionProjects\Demo\ 类和对象 \ 继承 > cl /d1 reportSingleClassLayoutSon 继承中的对象模型.cpp</pre></td></tr><tr><td data-num="40"></td><td><pre>用于 x86 的 Microsoft (R) C/C++ 优化编译器 19.44.35209 版</pre></td></tr><tr><td data-num="41"></td><td><pre>版权所有 (C) Microsoft Corporation。保留所有权利。</pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre>继承中的对象模型.cpp</pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>class Son       size (16):</pre></td></tr><tr><td data-num="46"></td><td><pre>        +---</pre></td></tr><tr><td data-num="47"></td><td><pre> 0      | +--- (base class Base)</pre></td></tr><tr><td data-num="48"></td><td><pre> 0      | | m_A</pre></td></tr><tr><td data-num="49"></td><td><pre> 4      | | m_B</pre></td></tr><tr><td data-num="50"></td><td><pre> 8      | | m_C</pre></td></tr><tr><td data-num="51"></td><td><pre>        | +---</pre></td></tr><tr><td data-num="52"></td><td><pre>12      | m_D</pre></td></tr><tr><td data-num="53"></td><td><pre>        +---</pre></td></tr><tr><td data-num="54"></td><td><pre>D:\Software\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.44.35207\include\__msvc_ostream.hpp (781): warning C4530: 使用了 C++ 异常处理程序，但未启用展开语义。请指定 /EHsc</pre></td></tr><tr><td data-num="55"></td><td><pre>D:\Software\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.44.35207\include\__msvc_ostream.hpp (781): note: 模板实例化上下文 (最早的实例化上下文) 为</pre></td></tr><tr><td data-num="56"></td><td><pre>继承中的对象模型.cpp (31): note: 查看对正在编译的函数 模板 实例化 “std::basic_ostream&lt;char,std::char_traits&lt;char>> &amp;std::operator &lt;&lt;&lt;std::char_traits&lt;char>>(std::basic_ostream&lt;char,std::char_traits&lt;char>> &amp;,const char *)” 的引用</pre></td></tr><tr><td data-num="57"></td><td><pre>Microsoft (R) Incremental Linker Version 14.44.35209.0</pre></td></tr><tr><td data-num="58"></td><td><pre>Copyright (C) Microsoft Corporation.  All rights reserved.</pre></td></tr><tr><td data-num="59"></td><td><pre></pre></td></tr><tr><td data-num="60"></td><td><pre>/out: 继承中的对象模型.exe</pre></td></tr><tr><td data-num="61"></td><td><pre>继承中的对象模型.obj</pre></td></tr><tr><td data-num="62"></td><td><pre></pre></td></tr><tr><td data-num="63"></td><td><pre>D:\CLionProjects\Demo\ 类和对象 \ 继承 ></pre></td></tr><tr><td data-num="64"></td><td><pre>*/</pre></td></tr></table></figure><blockquote><p>另外可以使用 Vs 来查看继承类中的属性是否被一同继承了没有，使用 Vs 开发终端，输入： <code>cl /d1 reportSingleClassLayout(类名) 文件名</code> 例如： <code>cl /d1 reportSingleClassLayoutSon 继承中的对象模型.cpp</code></p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"><span>查看Son类的底层继承属性</span></figcaption><table><tr><td data-num="1"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span>cl /d1 reportSingleClassLayoutSon 继承中的对象模型.cpp</pre></td></tr><tr><td data-num="2"></td><td data-command="[Administrator] $"></td><td><pre>用于 x86 的 Microsoft <span class="token punctuation">(</span>R<span class="token punctuation">)</span> C/C++ 优化编译器 <span class="token number">19.44</span>.35209 版</pre></td></tr><tr><td data-num="3"></td><td data-command="[Administrator] $"></td><td><pre>版权所有<span class="token punctuation">(</span>C<span class="token punctuation">)</span> Microsoft Corporation。保留所有权利。</pre></td></tr><tr><td data-num="4"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td data-command="[Administrator] $"></td><td><pre>继承中的对象模型.cpp</pre></td></tr><tr><td data-num="6"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td data-command="[Administrator] $"></td><td><pre>class Son       size<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="8"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="9"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Base<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> <span class="token operator">|</span> m_A</pre></td></tr><tr><td data-num="11"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> <span class="token operator">|</span> m_B</pre></td></tr><tr><td data-num="12"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">8</span>      <span class="token operator">|</span> <span class="token operator">|</span> m_C</pre></td></tr><tr><td data-num="13"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="14"></td><td data-command="[Administrator] $"></td><td><pre><span class="token number">12</span>      <span class="token operator">|</span> m_D</pre></td></tr><tr><td data-num="15"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="16"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>Software<span class="token punctuation">\</span>Microsoft Visual Studio<span class="token punctuation">\</span><span class="token number">2022</span><span class="token punctuation">\</span>Community<span class="token punctuation">\</span>VC<span class="token punctuation">\</span>Tools<span class="token punctuation">\</span>MSVC<span class="token punctuation">\</span><span class="token number">14.44</span>.35207<span class="token punctuation">\</span>include<span class="token punctuation">\</span>__msvc_ostream.hpp<span class="token punctuation">(</span><span class="token number">781</span><span class="token punctuation">)</span>: warning C4530: 使用了 C++ 异常处理程序，但未启用展开语义。请指定 /EHsc</pre></td></tr><tr><td data-num="17"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>Software<span class="token punctuation">\</span>Microsoft Visual Studio<span class="token punctuation">\</span><span class="token number">2022</span><span class="token punctuation">\</span>Community<span class="token punctuation">\</span>VC<span class="token punctuation">\</span>Tools<span class="token punctuation">\</span>MSVC<span class="token punctuation">\</span><span class="token number">14.44</span>.35207<span class="token punctuation">\</span>include<span class="token punctuation">\</span>__msvc_ostream.hpp<span class="token punctuation">(</span><span class="token number">781</span><span class="token punctuation">)</span>: note: 模板实例化上下文<span class="token punctuation">(</span>最早的实例化上下文<span class="token punctuation">)</span>为</pre></td></tr><tr><td data-num="18"></td><td data-command="[Administrator] $"></td><td><pre>继承中的对象模型.cpp<span class="token punctuation">(</span><span class="token number">31</span><span class="token punctuation">)</span>: note: 查看对正在编译的函数 模板 实例化“std::basic_ostream<span class="token operator">&lt;</span>char,std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span> <span class="token operator">&amp;</span>std::operator <span class="token operator">&lt;&lt;&lt;</span>std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span><span class="token punctuation">(</span>std::basic_ostream<span class="token operator">&lt;</span>char,std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span> <span class="token operator">&amp;</span>,const char *<span class="token punctuation">)</span>”的引用</pre></td></tr><tr><td data-num="19"></td><td data-command="[Administrator] $"></td><td><pre>Microsoft <span class="token punctuation">(</span>R<span class="token punctuation">)</span> Incremental Linker Version <span class="token number">14.44</span>.35209.0</pre></td></tr><tr><td data-num="20"></td><td data-command="[Administrator] $"></td><td><pre>Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> Microsoft Corporation.  All rights reserved.</pre></td></tr><tr><td data-num="21"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td data-command="[Administrator] $"></td><td><pre>/out:继承中的对象模型.exe</pre></td></tr><tr><td data-num="23"></td><td data-command="[Administrator] $"></td><td><pre>继承中的对象模型.obj</pre></td></tr><tr><td data-num="24"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span></pre></td></tr></table></figure><h3 id="继承中构造和析构顺序"><a class="anchor" href="#继承中构造和析构顺序">#</a> 继承中构造和析构顺序</h3><blockquote><p>在子类继承父类后，当创建子类对象，也会调用父类的构造函数，问题：父类和子类的构造和析构顺序是谁先谁后？？？</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>继承中构造和析构顺序.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 继承中构造和析构顺序</pre></td></tr><tr><td data-num="3"></td><td><pre> * 子类继承父类后当创建子类对象，也会调用父类的构造函数</pre></td></tr><tr><td data-num="4"></td><td><pre> * 问题：父类和子类的构造和析构顺序是谁先谁后？</pre></td></tr><tr><td data-num="5"></td><td><pre> * 结论：父有 -> 子有 -> 子无 -> 父无</pre></td></tr><tr><td data-num="6"></td><td><pre> * 总结：继承中先调用父类构造函数，再调用子类构造函数，析构顺序与构造调用则相反</pre></td></tr><tr><td data-num="7"></td><td><pre>*/</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base构造函数！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base析构函数！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son构造函数！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token operator">~</span><span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son析构函数！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token comment">// 继承中的构造和析构顺序如下：</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    <span class="token comment">// 先构造父类，再构造子类，析构的顺序与构造的顺序相反</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    Son son<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="44"></td><td><pre> * 执行结果：</pre></td></tr><tr><td data-num="45"></td><td><pre> * Base 构造函数！</pre></td></tr><tr><td data-num="46"></td><td><pre> * Son 构造函数！</pre></td></tr><tr><td data-num="47"></td><td><pre> * Son 析构函数！</pre></td></tr><tr><td data-num="48"></td><td><pre> * Base 析构函数！</pre></td></tr><tr><td data-num="49"></td><td><pre>*/</pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="继承同名成员处理方式"><a class="anchor" href="#继承同名成员处理方式">#</a> 继承同名成员处理方式</h3><blockquote><p>问题：当子类与父类出现同名的成员，如何通过子类对象，访问到子类或父类中同名的数据吗？访问子类同名成员，直接访问即可，访问父类同名成员，需要加作用域</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>继承同名成员处理方式.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 继承同名成员处理方式</pre></td></tr><tr><td data-num="3"></td><td><pre> * 问题：当子类与父类出现同名的成员，如何通过子类对象，访问到子类或父类中同名的数据吗？</pre></td></tr><tr><td data-num="4"></td><td><pre> * 访问子类同名成员，直接访问即可</pre></td></tr><tr><td data-num="5"></td><td><pre> * 访问父类同名成员，需要加作用域</pre></td></tr><tr><td data-num="6"></td><td><pre> * 总结：</pre></td></tr><tr><td data-num="7"></td><td><pre> *  1. 子类对象可以直接访问到子类中同名成员</pre></td></tr><tr><td data-num="8"></td><td><pre> *  2. 子类镀锌加作用域可以访问到父类同名成员</pre></td></tr><tr><td data-num="9"></td><td><pre> *  3. 当子类与父类拥有同名的成员函数，子类会隐藏掉父类中同名成员函数，只有加上作用域才可以访问到父类中的同名函数，其中包括父类中的重载函数</pre></td></tr><tr><td data-num="10"></td><td><pre> */</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base func函数被调用！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">// 重载函数</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base func(int a)函数被调用！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="37"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>    <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son func函数被调用！"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token comment">// 同名成员属性处理</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    Son s<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son 下的m_A = "</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token comment">// 如果通过子类对象访问到父类中同名的成员，需要加上父类的作用域</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base 下的m_A = "</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>Base<span class="token double-colon punctuation">::</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token comment">// 同名成员函数处理</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    Son son<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    <span class="token comment">// 就近原则调用</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    son<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token comment">// 添加父类作用域</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    son<span class="token punctuation">.</span><span class="token class-name">Base</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// 如果子类中出现和父类同名的成员函数，子类的同名成员会隐藏掉父类中所有同名成员函数</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    <span class="token comment">// 如果想要访问到父类中的被隐藏的同名成员函数，就需要添加父类作用域</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    son<span class="token punctuation">.</span><span class="token class-name">Base</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="67"></td><td><pre></pre></td></tr><tr><td data-num="68"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="69"></td><td><pre><span class="token comment">//    test01();</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="71"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="继承同名静态成员处理方式"><a class="anchor" href="#继承同名静态成员处理方式">#</a> 继承同名静态成员处理方式</h3><blockquote><p>问题：继承中同名的静态成员在子类对象上如何进行访问？</p></blockquote><ul><li>静态成员和非静态成员出现同名，处理方式一致<ul><li>访问子类同名成员，直接访问即可</li><li>访问父类同名成员，需要加作用域</li></ul></li></ul><figure class="highlight cpp"><figcaption data-lang="C++"><span>继承同名静态成员处理方式.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 继承同名静态成员处理方式</pre></td></tr><tr><td data-num="3"></td><td><pre>* 问题：继承中同名的静态成员在子类对象上如何进行访问？</pre></td></tr><tr><td data-num="4"></td><td><pre> * 静态成员和非静态成员出现同名，处理方式一致</pre></td></tr><tr><td data-num="5"></td><td><pre> *  访问子类同名成员，直接访问即可</pre></td></tr><tr><td data-num="6"></td><td><pre> *  访问父类同名成员，需要加作用域</pre></td></tr><tr><td data-num="7"></td><td><pre> * 总结：同名静态成员处理方式和非静态处理方式一样，只不过有两种访问的方式 (通过对象或类名进行访问)</pre></td></tr><tr><td data-num="8"></td><td><pre>*/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base - static void func()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base - static void func(int a)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">int</span> Base<span class="token double-colon punctuation">::</span>m_A <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son - static void func()"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token keyword">int</span> Son<span class="token double-colon punctuation">::</span>m_A <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token comment">// 同名静态成员属性</span></pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token comment">// 1. 通过对象访问</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"通过对象进行访问："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    Son s<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son  下 m_A = "</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base 下 m_A = "</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>Base<span class="token double-colon punctuation">::</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token comment">// 2. 通过类名访问</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"通过类名进行访问："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Son  下 m_A = "</span> <span class="token operator">&lt;&lt;</span> Son<span class="token double-colon punctuation">::</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token comment">// 第一个：：代表通过类名方式访问，第二个：：代表访问父类作用域下的成员函数</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base 下 m_A = "</span> <span class="token operator">&lt;&lt;</span> Son<span class="token double-colon punctuation">::</span>Base<span class="token double-colon punctuation">::</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token comment">// 同名静态成员函数</span></pre></td></tr><tr><td data-num="57"></td><td><pre><span class="token keyword">void</span> <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="58"></td><td><pre>    <span class="token comment">// 1. 通过对象访问</span></pre></td></tr><tr><td data-num="59"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"通过对象访问："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="60"></td><td><pre>    Son son<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    son<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    son<span class="token punctuation">.</span><span class="token class-name">Base</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// 2. 通过类名访问</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"通过类名访问："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="65"></td><td><pre>    <span class="token class-name">Son</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="66"></td><td><pre>    <span class="token class-name">Base</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="67"></td><td><pre>    <span class="token comment">// 如果子类先访问父类再访问函数也可以</span></pre></td></tr><tr><td data-num="68"></td><td><pre>    Son<span class="token double-colon punctuation">::</span><span class="token class-name">Base</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="69"></td><td><pre>    <span class="token comment">// 子类出现和父类同名静态成员函数，也会隐藏父类中所有同名成员函数</span></pre></td></tr><tr><td data-num="70"></td><td><pre>    <span class="token comment">// 如果想访问父类中被隐藏同名成员，需要添加父类作用域</span></pre></td></tr><tr><td data-num="71"></td><td><pre>    Son<span class="token double-colon punctuation">::</span><span class="token class-name">Base</span><span class="token double-colon punctuation">::</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="72"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="73"></td><td><pre></pre></td></tr><tr><td data-num="74"></td><td><pre></pre></td></tr><tr><td data-num="75"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="76"></td><td><pre><span class="token comment">//    test01();</span></pre></td></tr><tr><td data-num="77"></td><td><pre>    <span class="token function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="78"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="多继承语法"><a class="anchor" href="#多继承语法">#</a> 多继承语法</h3><blockquote><p><code>C++</code> 允许一个类继承多个类，语法： <code>class 子类:继承方式 父类1,继承方式 父类2...</code> , 多继承可能会引发父类中有同名成员的出现，这时就需要添加作用域来进行区分，但在实际开发中不推荐使用 <code>C++</code> 的多继承方式</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>多继承语法.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre> * 多继承语法</pre></td></tr><tr><td data-num="3"></td><td><pre>* C++ 允许一个类继承多个类</pre></td></tr><tr><td data-num="4"></td><td><pre> * 语法：class 子类：继承方式 父类 1, 继承方式 父类 2....</pre></td></tr><tr><td data-num="5"></td><td><pre> * 多继承可能会引发父类中有同名成员的出现，这时就需要添加作用域来进行区分</pre></td></tr><tr><td data-num="6"></td><td><pre> * 但在实际开发中不推荐使用 C++ 的多继承方式</pre></td></tr><tr><td data-num="7"></td><td><pre> * 总结：多继承中如果父类中出现了同名的情况，子类要使用父类中的属性变量时，就需要添加父类作用域才可以正常调用</pre></td></tr><tr><td data-num="8"></td><td><pre>*/</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base1</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">Base1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Base2</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token function">Base2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        m_A <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">int</span> m_A<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Son</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Base1</span><span class="token punctuation">,</span><span class="token keyword">public</span> <span class="token class-name">Base2</span></span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        m_C <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        m_D <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>    <span class="token keyword">int</span> m_C<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">int</span> m_D<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="40"></td><td><pre>    Son s<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="41"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"sizeof Son = "</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="42"></td><td><pre>    <span class="token comment">// 当父类中出现同名成员，需要添加作用域进行区分</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base1::m_A = "</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>Base1<span class="token double-colon punctuation">::</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="44"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Base2::m_A = "</span> <span class="token operator">&lt;&lt;</span> s<span class="token punctuation">.</span>Base2<span class="token double-colon punctuation">::</span>m_A <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="52"></td><td><pre></pre></td></tr><tr><td data-num="53"></td><td><pre> D:\CLionProjects\Demo\ 类和对象 \ 继承 > cl /d1 reportSingleClassLayoutSon ".\ 多继承语法.cpp"</pre></td></tr><tr><td data-num="54"></td><td><pre>用于 x86 的 Microsoft (R) C/C++ 优化编译器 19.44.35209 版</pre></td></tr><tr><td data-num="55"></td><td><pre>版权所有 (C) Microsoft Corporation。保留所有权利。</pre></td></tr><tr><td data-num="56"></td><td><pre></pre></td></tr><tr><td data-num="57"></td><td><pre>多继承语法.cpp</pre></td></tr><tr><td data-num="58"></td><td><pre></pre></td></tr><tr><td data-num="59"></td><td><pre>class Son       size (16):</pre></td></tr><tr><td data-num="60"></td><td><pre>        +---</pre></td></tr><tr><td data-num="61"></td><td><pre> 0      | +--- (base class Base1)</pre></td></tr><tr><td data-num="62"></td><td><pre> 0      | | m_A</pre></td></tr><tr><td data-num="63"></td><td><pre>        | +---</pre></td></tr><tr><td data-num="64"></td><td><pre> 4      | +--- (base class Base2)</pre></td></tr><tr><td data-num="65"></td><td><pre> 4      | | m_B</pre></td></tr><tr><td data-num="66"></td><td><pre>        | +---</pre></td></tr><tr><td data-num="67"></td><td><pre> 8      | m_C</pre></td></tr><tr><td data-num="68"></td><td><pre>12      | m_D</pre></td></tr><tr><td data-num="69"></td><td><pre>        +---</pre></td></tr><tr><td data-num="70"></td><td><pre>D:\Software\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.44.35207\include\__msvc_ostream.hpp (781): warning C4530: 使用了 C++ 异常处理程序，但未启用展开语义。请指定 /EHsc</pre></td></tr><tr><td data-num="71"></td><td><pre>D:\Software\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.44.35207\include\__msvc_ostream.hpp (781): note: 模板实例化上下文 (最早的实例化上下文) 为</pre></td></tr><tr><td data-num="72"></td><td><pre>.\ 多继承语法.cpp (44): note: 查看对正在编译的函数 模板 实例化 “std::basic_ostream&lt;char,std::char_traits&lt;char>> &amp;std::operator &lt;&lt;&lt;std::char_traits&lt;char>>(std::basic_ostream&lt;char,std::char_traits&lt;char>> &amp;,const char *)” 的引用</pre></td></tr><tr><td data-num="73"></td><td><pre>Microsoft (R) Incremental Linker Version 14.44.35209.0</pre></td></tr><tr><td data-num="74"></td><td><pre>Copyright (C) Microsoft Corporation.  All rights reserved.</pre></td></tr><tr><td data-num="75"></td><td><pre></pre></td></tr><tr><td data-num="76"></td><td><pre>/out: 多继承语法.exe</pre></td></tr><tr><td data-num="77"></td><td><pre>多继承语法.obj</pre></td></tr><tr><td data-num="78"></td><td><pre></pre></td></tr><tr><td data-num="79"></td><td><pre>D:\CLionProjects\Demo\ 类和对象 \ 继承 ></pre></td></tr><tr><td data-num="80"></td><td><pre></pre></td></tr><tr><td data-num="81"></td><td><pre>*/</pre></td></tr></table></figure><figure class="highlight bash"><figcaption data-lang="bash"><span>查看Son类的底层继承属性</span></figcaption><table><tr><td data-num="1"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span>cl /d1 reportSingleClassLayoutSon <span class="token string">".\多继承语法.cpp"</span></pre></td></tr><tr><td data-num="2"></td><td data-command="[Administrator] $"></td><td><pre>用于 x86 的 Microsoft <span class="token punctuation">(</span>R<span class="token punctuation">)</span> C/C++ 优化编译器 <span class="token number">19.44</span>.35209 版</pre></td></tr><tr><td data-num="3"></td><td data-command="[Administrator] $"></td><td><pre>版权所有<span class="token punctuation">(</span>C<span class="token punctuation">)</span> Microsoft Corporation。保留所有权利。</pre></td></tr><tr><td data-num="4"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td data-command="[Administrator] $"></td><td><pre>多继承语法.cpp</pre></td></tr><tr><td data-num="6"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td data-command="[Administrator] $"></td><td><pre>class Son       size<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="8"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="9"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Base1<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> <span class="token operator">|</span> m_A</pre></td></tr><tr><td data-num="11"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="12"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Base2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> <span class="token operator">|</span> m_B</pre></td></tr><tr><td data-num="14"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="15"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">8</span>      <span class="token operator">|</span> m_C</pre></td></tr><tr><td data-num="16"></td><td data-command="[Administrator] $"></td><td><pre><span class="token number">12</span>      <span class="token operator">|</span> m_D</pre></td></tr><tr><td data-num="17"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="18"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>Software<span class="token punctuation">\</span>Microsoft Visual Studio<span class="token punctuation">\</span><span class="token number">2022</span><span class="token punctuation">\</span>Community<span class="token punctuation">\</span>VC<span class="token punctuation">\</span>Tools<span class="token punctuation">\</span>MSVC<span class="token punctuation">\</span><span class="token number">14.44</span>.35207<span class="token punctuation">\</span>include<span class="token punctuation">\</span>__msvc_ostream.hpp<span class="token punctuation">(</span><span class="token number">781</span><span class="token punctuation">)</span>: warning C4530: 使用了 C++ 异常处理程序，但未启用展开语义。请指定 /EHsc</pre></td></tr><tr><td data-num="19"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>Software<span class="token punctuation">\</span>Microsoft Visual Studio<span class="token punctuation">\</span><span class="token number">2022</span><span class="token punctuation">\</span>Community<span class="token punctuation">\</span>VC<span class="token punctuation">\</span>Tools<span class="token punctuation">\</span>MSVC<span class="token punctuation">\</span><span class="token number">14.44</span>.35207<span class="token punctuation">\</span>include<span class="token punctuation">\</span>__msvc_ostream.hpp<span class="token punctuation">(</span><span class="token number">781</span><span class="token punctuation">)</span>: note: 模板实例化上下文<span class="token punctuation">(</span>最早的实例化上下文<span class="token punctuation">)</span>为</pre></td></tr><tr><td data-num="20"></td><td data-command="[Administrator] $"></td><td><pre>.<span class="token punctuation">\</span>多继承语法.cpp<span class="token punctuation">(</span><span class="token number">44</span><span class="token punctuation">)</span>: note: 查看对正在编译的函数 模板 实例化“std::basic_ostream<span class="token operator">&lt;</span>char,std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span> <span class="token operator">&amp;</span>std::operator <span class="token operator">&lt;&lt;&lt;</span>std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span><span class="token punctuation">(</span>std::basic_ostream<span class="token operator">&lt;</span>char,std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span> <span class="token operator">&amp;</span>,const char *<span class="token punctuation">)</span>”的引用</pre></td></tr><tr><td data-num="21"></td><td data-command=""></td><td><pre>Microsoft <span class="token punctuation">(</span>R<span class="token punctuation">)</span> Incremental Linker Version <span class="token number">14.44</span>.35209.0</pre></td></tr><tr><td data-num="22"></td><td data-command="[Administrator] $"></td><td><pre>Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> Microsoft Corporation.  All rights reserved.</pre></td></tr><tr><td data-num="23"></td><td data-command="[Administrator] $"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td data-command=""></td><td><pre>/out:多继承语法.exe</pre></td></tr><tr><td data-num="25"></td><td data-command="[Administrator] $"></td><td><pre>多继承语法.obj</pre></td></tr><tr><td data-num="26"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span></pre></td></tr></table></figure><h3 id="菱形继承"><a class="anchor" href="#菱形继承">#</a> 菱形继承</h3><ul><li>菱形继承概念：<ul><li>两个派生类继承同一个基类</li><li>又有某个类同事继承这两个的派生类</li><li>这种继承就被称为菱形继承或是钻石继承</li><li>典型继承案例：</li><li>动物：</li><li>羊 鸵</li><li>羊驼</li></ul></li></ul><blockquote><p>虚继承关键字 <code>virtual</code> , 使用 <code>virtual</code> 即可解决菱形继承的多份数据问题。</p></blockquote><figure class="highlight cpp"><figcaption data-lang="C++"><span>菱形继承.cpp</span></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">/**</span></pre></td></tr><tr><td data-num="2"></td><td><pre>* 菱形继承</pre></td></tr><tr><td data-num="3"></td><td><pre> * 菱形继承概念：</pre></td></tr><tr><td data-num="4"></td><td><pre> *  两个派生类继承同一个基类</pre></td></tr><tr><td data-num="5"></td><td><pre> *  有某个类同事继承这两个的派生类</pre></td></tr><tr><td data-num="6"></td><td><pre> *  这种继承就被称为菱形继承或是钻石继承</pre></td></tr><tr><td data-num="7"></td><td><pre> *  典型继承案例：</pre></td></tr><tr><td data-num="8"></td><td><pre> *     动物：</pre></td></tr><tr><td data-num="9"></td><td><pre> *    羊  鸵</pre></td></tr><tr><td data-num="10"></td><td><pre> *     羊驼</pre></td></tr><tr><td data-num="11"></td><td><pre> * 总结：</pre></td></tr><tr><td data-num="12"></td><td><pre> *      1. 菱形继承带来的主要问题是子类继承两份相同的数据，导致资源浪费以及毫无意义</pre></td></tr><tr><td data-num="13"></td><td><pre> *      2. 利用虚继承可以解决菱形继承问题</pre></td></tr><tr><td data-num="14"></td><td><pre>*/</pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">// 动物类</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">public</span><span class="token operator">:</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token keyword">int</span> m_Age<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">// 利用虚继承，来解决菱形继承的问题</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">// 在继承之前，加上关键字 virtual 就会变为虚继承</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">// Animal 类也就被称为虚基类</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">// 羊类继承动物</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Sheep</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">Animal</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token comment">// 鸵鸟继承动物</span></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Tuo</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">virtual</span> <span class="token keyword">public</span> <span class="token class-name">Animal</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token comment">// 羊驼继承羊类和鸵鸟类</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">SheepTuo</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Sheep</span><span class="token punctuation">,</span> <span class="token keyword">public</span> <span class="token class-name">Tuo</span></span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="45"></td><td><pre>    SheepTuo st<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    st<span class="token punctuation">.</span>Sheep<span class="token double-colon punctuation">::</span>m_Age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    st<span class="token punctuation">.</span>Tuo<span class="token double-colon punctuation">::</span>m_Age <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token comment">// 当菱形继承，两个父类拥有相同数据时，就需要添加父类作用域才可以进行区分</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"st.Sheep::m_Age = "</span> <span class="token operator">&lt;&lt;</span> st<span class="token punctuation">.</span>Sheep<span class="token double-colon punctuation">::</span>m_Age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"st.Tuo::m_Age = "</span> <span class="token operator">&lt;&lt;</span> st<span class="token punctuation">.</span>Tuo<span class="token double-colon punctuation">::</span>m_Age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token comment">// 这份数据我们知道，只有一份就可以，菱形继承导致数据会有两份，会导致资源的浪费</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token comment">// 菱形继承的解决办法是给羊类和鸵鸟类在继承动物类时添加虚继承</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"st.m_Age = "</span> <span class="token operator">&lt;&lt;</span> st<span class="token punctuation">.</span>m_Age <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="55"></td><td><pre></pre></td></tr><tr><td data-num="56"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p>未使用虚继承后的底层实现</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"><span>未使用虚继承的底层实现</span></figcaption><table><tr><td data-num="1"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span>cl /d1 reportSingleClassLayoutSheepTuo 菱形继承.cpp</pre></td></tr><tr><td data-num="2"></td><td data-command="[Administrator] $"></td><td><pre>用于 x86 的 Microsoft <span class="token punctuation">(</span>R<span class="token punctuation">)</span> C/C++ 优化编译器 <span class="token number">19.44</span>.35209 版</pre></td></tr><tr><td data-num="3"></td><td data-command="[Administrator] $"></td><td><pre>版权所有<span class="token punctuation">(</span>C<span class="token punctuation">)</span> Microsoft Corporation。保留所有权利。</pre></td></tr><tr><td data-num="4"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp</pre></td></tr><tr><td data-num="6"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>: warning C4819: 该文件包含不能在当前代码页<span class="token punctuation">(</span><span class="token number">936</span><span class="token punctuation">)</span>中表示的字符。请将该文件保存为 Unicode 格式以防止数据丢失</pre></td></tr><tr><td data-num="7"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td data-command="[Administrator] $"></td><td><pre>class SheepTuo  size<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="9"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="10"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Sheep<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Animal<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> m_Age</pre></td></tr><tr><td data-num="13"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="14"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="15"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Tuo<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Animal<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> m_Age</pre></td></tr><tr><td data-num="18"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="19"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="20"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="21"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp<span class="token punctuation">(</span><span class="token number">56</span><span class="token punctuation">)</span>: error C2385: 对“m_Age”的访问不明确</pre></td></tr><tr><td data-num="22"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp<span class="token punctuation">(</span><span class="token number">56</span><span class="token punctuation">)</span>: note: 可以是基 <span class="token string">"Animal"</span> 中的 <span class="token string">"m_Age"</span></pre></td></tr><tr><td data-num="23"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp<span class="token punctuation">(</span><span class="token number">56</span><span class="token punctuation">)</span>: note: 也可以是基 <span class="token string">"Animal"</span> 中的 <span class="token string">"m_Age"</span></pre></td></tr><tr><td data-num="24"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span></pre></td></tr></table></figure><blockquote><p>使用虚继承后的底层实现，虚继承关键字 <code>virtual</code></p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"><span>使用虚继承后的底层实现</span></figcaption><table><tr><td data-num="1"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span>cl /d1 reportSingleClassLayoutSheepTuo 菱形继承.cpp</pre></td></tr><tr><td data-num="2"></td><td data-command="[Administrator] $"></td><td><pre>用于 x86 的 Microsoft <span class="token punctuation">(</span>R<span class="token punctuation">)</span> C/C++ 优化编译器 <span class="token number">19.44</span>.35209 版</pre></td></tr><tr><td data-num="3"></td><td data-command="[Administrator] $"></td><td><pre>版权所有<span class="token punctuation">(</span>C<span class="token punctuation">)</span> Microsoft Corporation。保留所有权利。</pre></td></tr><tr><td data-num="4"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp</pre></td></tr><tr><td data-num="6"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>: warning C4819: 该文件包含不能在当前代码页<span class="token punctuation">(</span><span class="token number">936</span><span class="token punctuation">)</span>中表示的字符。请将该文件保存为 Unicode 格式以防止数据丢失</pre></td></tr><tr><td data-num="7"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td data-command="[Administrator] $"></td><td><pre>class SheepTuo  size<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>:</pre></td></tr><tr><td data-num="9"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="10"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Sheep<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">&#123;</span>vbptr<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="13"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> +--- <span class="token punctuation">(</span>base class Tuo<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">4</span>      <span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">&#123;</span>vbptr<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td data-command="[Administrator] $"></td><td><pre>        <span class="token operator">|</span> +---</pre></td></tr><tr><td data-num="16"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="17"></td><td data-command="[Administrator] $"></td><td><pre>        +--- <span class="token punctuation">(</span>virtual base Animal<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">8</span>      <span class="token operator">|</span> m_Age</pre></td></tr><tr><td data-num="19"></td><td data-command="[Administrator] $"></td><td><pre>        +---</pre></td></tr><tr><td data-num="20"></td><td data-command="[Administrator] $"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td data-command="[Administrator] $"></td><td><pre>SheepTuo::<span class="token variable">$vbtable</span>@Sheep@:</pre></td></tr><tr><td data-num="22"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="23"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">1</span>      <span class="token operator">|</span> <span class="token number">8</span> <span class="token punctuation">(</span>SheepTuod<span class="token punctuation">(</span>Sheep+0<span class="token punctuation">)</span>Animal<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td data-command="[Administrator] $"></td><td><pre>SheepTuo::<span class="token variable">$vbtable</span>@Tuo@:</pre></td></tr><tr><td data-num="26"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">0</span>      <span class="token operator">|</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="27"></td><td data-command="[Administrator] $"></td><td><pre> <span class="token number">1</span>      <span class="token operator">|</span> <span class="token number">4</span> <span class="token punctuation">(</span>SheepTuod<span class="token punctuation">(</span>Tuo+0<span class="token punctuation">)</span>Animal<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td data-command="[Administrator] $"></td><td><pre>vbi:       class  offset o.vbptr  o.vbte fVtorDisp</pre></td></tr><tr><td data-num="29"></td><td data-command="[Administrator] $"></td><td><pre>          Animal       <span class="token number">8</span>       <span class="token number">0</span>       <span class="token number">4</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="30"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>Software<span class="token punctuation">\</span>Microsoft Visual Studio<span class="token punctuation">\</span><span class="token number">2022</span><span class="token punctuation">\</span>Community<span class="token punctuation">\</span>VC<span class="token punctuation">\</span>Tools<span class="token punctuation">\</span>MSVC<span class="token punctuation">\</span><span class="token number">14.44</span>.35207<span class="token punctuation">\</span>include<span class="token punctuation">\</span>__msvc_ostream.hpp<span class="token punctuation">(</span><span class="token number">781</span><span class="token punctuation">)</span>: warning C4530: 使用了 C++ 异常处理程序，但未启用展开语义。请指定 /EHsc</pre></td></tr><tr><td data-num="31"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>Software<span class="token punctuation">\</span>Microsoft Visual Studio<span class="token punctuation">\</span><span class="token number">2022</span><span class="token punctuation">\</span>Community<span class="token punctuation">\</span>VC<span class="token punctuation">\</span>Tools<span class="token punctuation">\</span>MSVC<span class="token punctuation">\</span><span class="token number">14.44</span>.35207<span class="token punctuation">\</span>include<span class="token punctuation">\</span>__msvc_ostream.hpp<span class="token punctuation">(</span><span class="token number">781</span><span class="token punctuation">)</span>: note: 模板实例化上下文<span class="token punctuation">(</span>最早的实例化上下文<span class="token punctuation">)</span>为</pre></td></tr><tr><td data-num="32"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.cpp<span class="token punctuation">(</span><span class="token number">52</span><span class="token punctuation">)</span>: note: 查看对正在编译的函数 模板 实例化“std::basic_ostream<span class="token operator">&lt;</span>char,std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span> <span class="token operator">&amp;</span>std::operator <span class="token operator">&lt;&lt;&lt;</span>std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span><span class="token punctuation">(</span>std::basic_ostream<span class="token operator">&lt;</span>char,std::char_traits<span class="token operator">&lt;</span>char<span class="token operator">>></span> <span class="token operator">&amp;</span>,const char *<span class="token punctuation">)</span>”的引用</pre></td></tr><tr><td data-num="33"></td><td data-command="[Administrator] $"></td><td><pre>Microsoft <span class="token punctuation">(</span>R<span class="token punctuation">)</span> Incremental Linker Version <span class="token number">14.44</span>.35209.0</pre></td></tr><tr><td data-num="34"></td><td data-command="[Administrator] $"></td><td><pre>Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> Microsoft Corporation.  All rights reserved.</pre></td></tr><tr><td data-num="35"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td data-command="[Administrator] $"></td><td><pre>/out:菱形继承.exe</pre></td></tr><tr><td data-num="37"></td><td data-command="[Administrator] $"></td><td><pre>菱形继承.obj</pre></td></tr><tr><td data-num="38"></td><td data-command=""></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td data-command="[Administrator] $"></td><td><pre>D:<span class="token punctuation">\</span>CLionProjects<span class="token punctuation">\</span>Demo<span class="token punctuation">\</span>类和对象<span class="token punctuation">\</span>继承<span class="token operator">></span></pre></td></tr></table></figure><blockquote><p>总结：1. 菱形继承带来的主要问题是子类继承两份相同的数据，导致资源浪费以及毫无意义。 2. 利用虚继承可以解决菱形继承问题</p></blockquote><h2 id="多态"><a class="anchor" href="#多态">#</a> 多态</h2><div class="tags"><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" rel="tag"><i class="ic i-tag"></i> 计算机科学</a> <a href="/tags/C/" rel="tag"><i class="ic i-tag"></i> C++</a> <a href="/tags/C-%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/" rel="tag"><i class="ic i-tag"></i> C++核心编程</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2025-06-17 18:00:55" itemprop="dateModified" datetime="2025-06-17T18:00:55+08:00">2025-06-17</time> </span><span id="计算机科学/c++/c++核心编程/" class="item leancloud_visitors" data-flag-title="C++核心编程" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="Light Rain 微信支付"><p>微信支付</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Light Rain <i class="ic i-at"><em>@</em></i>雨的记忆</li><li class="link"><strong>本文链接：</strong> <a href="https://rainrem.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/c++/c++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/" title="C++核心编程">https://rainrem.top/计算机科学/c++/c++核心编程/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC96aC1DTg=="><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/aigc/flux/Flux%E6%90%AD%E5%BB%BA%E6%B5%81%E7%A8%8B/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;www.dmoe.cc&#x2F;random.php?9435" title="Flux搭建流程"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> Flux</span><h3>Flux搭建流程</h3></a></div><div class="item right"></div></div><div class="wrap" id="comments" name="msg"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#new%E6%93%8D%E4%BD%9C%E7%AC%A6-%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">new 操作符 - 内存分区模型</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">引用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">2.1.</span> <span class="toc-text">引用的基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">2.2.</span> <span class="toc-text">引用注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%81%9A%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">2.3.</span> <span class="toc-text">引用做函数参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%81%9A%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">2.4.</span> <span class="toc-text">引用做函数返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">2.5.</span> <span class="toc-text">引用的本质</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F%E5%BC%95%E7%94%A8"><span class="toc-number">2.6.</span> <span class="toc-text">常量引用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8F%90%E9%AB%98"><span class="toc-number">3.</span> <span class="toc-text">函数提高</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E9%BB%98%E8%AE%A4%E5%8F%82%E6%95%B0"><span class="toc-number">3.1.</span> <span class="toc-text">函数的默认参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%8D%A0%E4%BD%8D%E5%8F%82%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text">函数的占位参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD"><span class="toc-number">3.3.</span> <span class="toc-text">函数重载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E9%87%8D%E8%BD%BD%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.4.</span> <span class="toc-text">函数重载注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.</span> <span class="toc-text">类和对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">4.1.</span> <span class="toc-text">封装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E5%AD%A6%E7%94%9F%E7%B1%BB"><span class="toc-number">4.2.</span> <span class="toc-text">设计学生类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#struct%E5%92%8Cclass%E5%8C%BA%E5%88%AB"><span class="toc-number">4.3.</span> <span class="toc-text">struct 和 class 区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%8B%E6%96%B9%E4%BD%93%E6%A1%88%E4%BE%8B"><span class="toc-number">4.4.</span> <span class="toc-text">立方体案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%82%B9%E5%92%8C%E5%9C%86%E7%9A%84%E5%85%B3%E7%B3%BB-%E6%A1%88%E4%BE%8B"><span class="toc-number">4.5.</span> <span class="toc-text">点和圆的关系 - 案例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.</span> <span class="toc-text">构造函数和析构函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB%E4%BB%A5%E5%8F%8A%E8%B0%83%E7%94%A8"><span class="toc-number">4.7.</span> <span class="toc-text">构造函数的分类以及调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%97%B6%E6%9C%BA"><span class="toc-number">4.8.</span> <span class="toc-text">拷贝构造函数调用时机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">4.9.</span> <span class="toc-text">构造函数调用规则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">4.10.</span> <span class="toc-text">深拷贝与浅拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%88%97%E8%A1%A8"><span class="toc-number">4.11.</span> <span class="toc-text">初始化列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E7%B1%BB%E6%88%90%E5%91%98"><span class="toc-number">4.12.</span> <span class="toc-text">类对象作为类成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%88%90%E5%91%98"><span class="toc-number">4.13.</span> <span class="toc-text">静态成员</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#c%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%E5%92%8Cthis%E6%8C%87%E9%92%88"><span class="toc-number">4.14.</span> <span class="toc-text">C++ 对象模型和 this 指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E5%92%8C%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E5%88%86%E5%BC%80%E5%AD%98%E5%82%A8"><span class="toc-number">4.14.1.</span> <span class="toc-text">成员变量和成员函数分开存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#this%E6%8C%87%E9%92%88%E6%A6%82%E5%BF%B5"><span class="toc-number">4.14.2.</span> <span class="toc-text">this 指针概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E6%8C%87%E9%92%88%E8%AE%BF%E9%97%AE%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">4.14.3.</span> <span class="toc-text">空指针访问成员函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#const%E4%BF%AE%E9%A5%B0%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">4.14.4.</span> <span class="toc-text">const 修饰成员函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8B%E5%85%83"><span class="toc-number">4.15.</span> <span class="toc-text">友元</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">4.16.</span> <span class="toc-text">运算符重载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%8F%B7%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">4.16.1.</span> <span class="toc-text">加号运算符重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E7%A7%BB%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">4.16.2.</span> <span class="toc-text">左移运算符重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%A2%9E%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">4.16.3.</span> <span class="toc-text">递增运算符重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">4.16.4.</span> <span class="toc-text">赋值运算符重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">4.16.5.</span> <span class="toc-text">关系运算符重载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD"><span class="toc-number">4.16.6.</span> <span class="toc-text">函数调用运算符重载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">4.17.</span> <span class="toc-text">继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E6%96%B9%E5%BC%8F"><span class="toc-number">4.17.1.</span> <span class="toc-text">继承方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">4.17.2.</span> <span class="toc-text">继承中的对象模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E4%B8%AD%E6%9E%84%E9%80%A0%E5%92%8C%E6%9E%90%E6%9E%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">4.17.3.</span> <span class="toc-text">继承中构造和析构顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%90%8C%E5%90%8D%E6%88%90%E5%91%98%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">4.17.4.</span> <span class="toc-text">继承同名成员处理方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%90%8C%E5%90%8D%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%A4%84%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">4.17.5.</span> <span class="toc-text">继承同名静态成员处理方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BB%A7%E6%89%BF%E8%AF%AD%E6%B3%95"><span class="toc-number">4.17.6.</span> <span class="toc-text">多继承语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8F%B1%E5%BD%A2%E7%BB%A7%E6%89%BF"><span class="toc-number">4.17.7.</span> <span class="toc-text">菱形继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E6%80%81"><span class="toc-number">4.18.</span> <span class="toc-text">多态</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/c++/c++%E6%A0%B8%E5%BF%83%E7%BC%96%E7%A8%8B/" rel="bookmark" title="C++核心编程">C++核心编程</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Light Rain" data-src="/images/02.jpg"><p class="name" itemprop="name">Light Rain</p><div class="description" itemprop="description">我还在原地等你，你却已经忘记曾来过这里</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">59</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">37</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">70</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1JhaW4yMzgvUmFpbjIzOC5naXRodWIuaW8=" title="https:&#x2F;&#x2F;github.com&#x2F;Rain238&#x2F;Rain238.github.io"><i class="ic i-github"></i></span> <span class="exturl item gitee" data-url="aHR0cHM6Ly9naXRlZS5jb20vUmFpblNhdWNl" title="https:&#x2F;&#x2F;gitee.com&#x2F;RainSauce"><i class="ic i-github"></i></span> <span class="exturl item qq" data-url="aHR0cHM6Ly91c2VyLnF6b25lLnFxLmNvbS8zMTY0Mzk1NzMw" title="https:&#x2F;&#x2F;user.qzone.qq.com&#x2F;3164395730"><i class="ic i-qq"></i></span> <span class="exturl item email" data-url="bWFpbHRvOjMxNjQzOTU3MzBAcXEuY29t" title="mailto:3164395730@qq.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-magic"></i>链环</a><ul class="submenu"><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友達</a></li><li class="item"><a href="/webstack/" rel="section"><i class="ic i-star"></i>网址</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-coffee"></i>手办</a><ul class="submenu"><li class="item"><span class="exturl" data-url="aHR0cHM6Ly93d3cuYW1pYW1pLmNvbS9jbi8="><i class="ic i-link-circle"></i>Amiami</span></li><li class="item"><span class="exturl" data-url="aHR0cHM6Ly93d3cuaHBvaS5uZXQuY24vaW5kZXgvaG9tZS8="><i class="ic i-link-circle"></i>手办维基</span></li><li class="item"><span class="exturl" data-url="aHR0cHM6Ly93d3cuMDMwYnV5Lm5ldC8="><i class="ic i-link-circle"></i>萌购任你购</span></li><li class="item"><span class="exturl" data-url="aHR0cHM6Ly93d3cubmF0aXZlLXdlYi5qcC8="><i class="ic i-link-circle"></i>ネイティブ</span></li></ul></li></ul></div><h3><span>Pixiv每日榜Top50</span></h3><iframe src="https://cloud.mokeyjay.com/pixiv" frameborder="0" style="width:100%;height:380px;margin:0"></iframe></div></div><link rel="stylesheet" href="./live2d/waifu.css"><div class="waifu"><div class="waifu-tips"></div><canvas id="live2d" class="live2d"></canvas><div class="waifu-tool"></div></div><script type="text/javascript" src="./live2d/waifu-tips.js"></script><script type="text/javascript" src="./live2d/live2d.js"></script><script type="text/javascript" src="./live2d/jquery-3.6.min.js"></script><script type="text/javascript" src="./live2d/jquery-ui.min.js"></script><script type="text/javascript">initModel("./live2d/waifu-tips.json")</script><ul id="quick"><li class="prev pjax"></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright"><span id="sitetime"></span><br>&copy; 2021 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Light Rain @ Daring Traveler</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">1m 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">15:16</span></div><div class="powered-by">本站由Hexo & Yume Shoka建成</div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"计算机科学/c++/c++核心编程/",favicon:{show:"✧(≖ ◡ ≖✿)已恢复正常",hide:"´･∀･)乂(･∀･｀失连中..."},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->